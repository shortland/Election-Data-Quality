(this["webpackJsonp416-app"]=this["webpackJsonp416-app"]||[]).push([[0],{135:function(e,t,n){e.exports=n.p+"static/media/ny_county_shoreline.b5f895d3.geojson"},136:function(e,t){},181:function(e){e.exports=JSON.parse('[{"type":"self intersecting border","from":"preprocessing","latitude":40.6643,"longitude":-79.9385},{"type":"open borders","from":"preprocessing","latitude":43.633461,"longitude":-76.797859},{"type":"gaps precinct coverage","from":"preprocessing","latitude":40.6071584,"longitude":-74.0881154},{"type":"precinct multi polygon","from":"preprocessing","latitude":42.1936482,"longitude":-74.135364},{"type":"overlapping precincts","from":"preprocessing","latitude":33.5722,"longitude":-112.088}]')},182:function(e,t,n){e.exports=n.p+"static/media/states_tooltip_data.1c2d3362.geojson"},183:function(e,t,n){e.exports=n.p+"static/media/ny_precincts.2736e231.geojson"},197:function(e,t,n){e.exports=n(335)},202:function(e,t,n){},316:function(e,t,n){},317:function(e,t,n){},318:function(e,t,n){},319:function(e,t,n){},329:function(e,t){},335:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(36),l=n.n(o),i=(n(202),n(12)),c=n(89),s=n(4),u=n(3),d=n(8),m=n(5),p=n(6),h=n(9),f=n(22),E=n(351),v=n(350),g=n(103),b=n(132),y=n.n(b),O=n(49),_=n(348),C=n(168),S=n(48),j=(n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),{id:"countyFill",type:"fill",paint:{"fill-color":"rgba(0, 0, 0, 0.0)"}}),w={id:"countyFillHighlighted",type:"fill",source:"countyFill",paint:{"fill-color":"rgba(66, 135, 245, 0.5)"}},k={id:"countyDataOutline",type:"line",paint:{"line-color":"#000000","line-width":2}},M={id:"stateFill",type:"fill",paint:{"fill-color":"rgba(66, 135, 245, 0.3)"}},x={id:"stateFillHighlighted",type:"fill",source:"stateFill",paint:{"fill-color":"rgba(66, 135, 245, 0.5)"}},D={id:"precinctFill",type:"fill",paint:{"fill-color":"rgba(0, 0, 0, 0.0)"}},I={id:"precinctFillHighlighted",type:"fill",source:"precinctFill",paint:{"fill-color":"rgba(66, 135, 245, 0.5)"}},F={id:"precinctOutline",type:"line",paint:{"line-color":"rgba(66, 135, 245, 1.0)","line-width":1}},N=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.onClick,a=e.shouldShowPins;return console.log(a),a?(console.log("should show pins"),t.map((function(e,t){return r.a.createElement(f.Marker,{key:"marker-".concat(t),longitude:e.longitude,latitude:e.latitude},r.a.createElement("svg",{height:20,viewBox:"0 0 24 24",style:{cursor:"pointer",fill:"#d00",stroke:"none",transform:"translate(".concat(-10,"px,").concat(-20,"px)")},onClick:function(){return n(e)}},r.a.createElement("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"})))}))):r.a.createElement("span",null)}}]),t}(a.PureComponent),P=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.info;return r.a.createElement("div",null,r.a.createElement("h3",null,"Map Error"),r.a.createElement("br",null),r.a.createElement("p",{style:{textAlign:"left"}},"Type: ",e.type,r.a.createElement("br",null),"Source: ",e.from))}}]),t}(a.PureComponent),R=n(39),T=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(R.a,null,r.a.createElement(R.a.Toggle,{variant:"success",id:"dropdown-basic"},"Select State"),r.a.createElement(R.a.Menu,null,r.a.createElement(R.a.Item,{href:"#/NewYork",onClick:this.props.select_state("NY")},"New York"),r.a.createElement(R.a.Item,{href:"#/Utah",onClick:this.props.select_state("UT")},"Utah"),r.a.createElement(R.a.Item,{href:"#/Wisconsin",onClick:this.props.select_state("WI")},"Wisconsin")))}}]),t}(a.Component),B=n(81),H=n.n(B),z=n(174),A=n(45),L=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={election:2016,electionResults:{Dem:60,Rep:40,Other:5}},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"changeElection",value:function(e){var t=100*Math.random(),n=100-(t=Math.round(t));this.setState({election:e,electionResults:{Dem:t,Rep:n}})}},{key:"render",value:function(){var e=this.state.electionResults,t=Object.keys(e);if(e)return r.a.createElement("div",null,r.a.createElement(z.a,{size:"sm",className:"mt-3"},r.a.createElement(A.a,{variant:"outline-primary",id:"btn1",className:"button",onClick:this.changeElection.bind(this,2016)},"2016"),r.a.createElement(A.a,{variant:"outline-primary",id:"btn3",className:"button",onClick:this.changeElection.bind(this,2008)},"2018")),r.a.createElement("br",null),r.a.createElement("hr",null),"Presidential:",r.a.createElement("div",{className:"BarDisplay"},r.a.createElement("div",{className:"BlueBar",style:{width:e[t[0]]+"%"}},t[0]+" "+e[t[0]]+"%"),r.a.createElement("div",{className:"RedBar",style:{width:e[t[1]]+"%"}},t[1]+" "+e[t[1]]+"%")),r.a.createElement("br",null),r.a.createElement("hr",null),"Congressional:",r.a.createElement("div",{className:"BarDisplay"},r.a.createElement("div",{className:"BlueBar",style:{width:e[t[0]]+"%"}},t[0]+" "+e[t[0]]+"%"),r.a.createElement("div",{className:"RedBar",style:{width:e[t[1]]+"%"}},t[1]+" "+e[t[1]]+"%")),r.a.createElement("a",{className:"dataSource",href:"https://electionlab.mit.edu/data"},"source"))}}]),t}(a.Component),V=n(175),G=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(V.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Race"),r.a.createElement("th",null,"Num"),r.a.createElement("th",null,"Percent"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"White"),r.a.createElement("td",null,"112"),r.a.createElement("td",null,"44%")),r.a.createElement("tr",null,r.a.createElement("th",null,"Black"),r.a.createElement("td",null,"55"),r.a.createElement("td",null,"22%")),r.a.createElement("tr",null,r.a.createElement("th",null,"Hispanic"),r.a.createElement("td",null,"80"),r.a.createElement("td",null,"32%")),r.a.createElement("tr",null,r.a.createElement("th",null,"Asian"),r.a.createElement("td",null,"6"),r.a.createElement("td",null,"2%")),r.a.createElement("tr",null,r.a.createElement("th",null,"Other"),r.a.createElement("td",null,"0"),r.a.createElement("td",null,"0%"))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"Total Population"),r.a.createElement("td",null,"253")))),r.a.createElement("a",{className:"dataSource",href:"https://electionlab.mit.edu/data"},"source"))}}]),t}(a.PureComponent),W=n(71),Y=function(e){function t(e){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).call(this,e))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"save_changes",value:function(){this.dismiss()}},{key:"dismiss",value:function(){this.props.data_correction_page_status("done")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"data_correction_page"},r.a.createElement("h4",null,"Data Correction Form"),r.a.createElement(W.a,null,r.a.createElement(W.a.Group,{controlId:"data_correction.target_data"},r.a.createElement(W.a.Label,null,"Data for correction"),r.a.createElement(W.a.Control,{as:"select"},r.a.createElement("option",null,"Demographic"),r.a.createElement("option",null,"Election"))),r.a.createElement(W.a.Group,{controlId:"data_correction.value"},r.a.createElement(W.a.Label,null,"Changed Value"),r.a.createElement(W.a.Control,{type:"value",placeholder:"Please enter corrected data"}))),r.a.createElement("div",{className:"data_correction_Btns"},r.a.createElement(A.a,{variant:"outline-primary",id:"data_change",onClick:function(){e.save_changes()}},"Change"),r.a.createElement(A.a,{variant:"outline-primary",id:"data_change_cancel",onClick:function(){e.dismiss()}},"Cancel")),r.a.createElement("br",null))}}]),t}(a.Component),U=n(137),q=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={comments:[]},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.get_comments()}},{key:"componentDidUpdate",value:function(e){e.savedCommentData!==this.props.savedCommentData&&this.get_saved_comments()}},{key:"get_saved_comments",value:function(){var e=this;console.log("________________",this.props.savedCommentData),this.props.savedCommentData&&this.setState((function(t){var n=t.comments;return n.push(e.props.savedCommentData),{comments:n}}))}},{key:"get_comments",value:function(){for(var e=Math.ceil(3*Math.random()),t=["David","Ilan","Reed","Sam"],n=["Some comment about changing the election data b/c old source was invalid.","Some comment about undoing the yesterdays changes done to the boundaries of the Albany county of NY.","Some test comment.","Another test comment."],a=[],r=0;r<e;r++){var o={commenter:t[Math.round(3*Math.random())],content:n[Math.round(3*Math.random())]};a.push(o)}this.setState({comments:a})}},{key:"render",value:function(){var e=this.state.comments,t=[];for(var n in e)t.push(r.a.createElement(U.a,null,r.a.createElement(U.a.Body,null,e[n].commenter,": ",e[n].content)));return r.a.createElement("div",null,t)}}]),t}(a.Component),J=n(92),Q=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={show:!1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handle_modal_display",value:function(e){this.setState({show:e})}},{key:"saveCommentData",value:function(e,t){var n={commenter:e,content:t};this.props.savedCommentData(n)}},{key:"render",value:function(){var e=this,t=this.state.show;return r.a.createElement("div",null,r.a.createElement(A.a,{variant:"primary",onClick:function(){e.handle_modal_display(!0)}},"Create Comment"),r.a.createElement(J.a,{show:t,onHide:function(){e.handle_modal_display(!1)}},r.a.createElement(J.a.Header,{closeButton:!0},r.a.createElement(J.a.Title,null,"Enter comment")),r.a.createElement(J.a.Body,null,r.a.createElement("input",{id:"commentModalInput",placeholder:" Please enter your comments here"})),r.a.createElement(J.a.Footer,null,r.a.createElement(A.a,{variant:"secondary",onClick:function(){e.handle_modal_display(!1)}},"Cancel"),r.a.createElement(A.a,{variant:"primary",onClick:function(){e.handle_modal_display(!1),e.saveCommentData("User",document.getElementById("commentModalInput").value)}},"Save Comment"))))}}]),t}(a.Component),X=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).createList=function(){var e=[],t=n.props.selected;if(t&&t.properties){var a=t.properties;for(var o in a)e.push(r.a.createElement("div",null,"".concat(o,": ").concat(a[o])))}return e},n.get_data_correction_page_status=function(e){"done"===e&&n.setState({mode:"data_display"})},n.get_comments_modal_data=function(e){e&&n.setState({comment_data:e})},n._handleClick=function(e){n.props.showErrorPins()},n.state={mode:"data_display",comment_data:void 0},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.mode,t=this.state.comment_data,n=this.createList();return n.length>0&&"data_display"===e?r.a.createElement("div",null,r.a.createElement(H.a,{trigger:"View General Info",open:!0},n),r.a.createElement(H.a,{trigger:"View Elections"},r.a.createElement(L,null)),r.a.createElement(H.a,{trigger:"View Demographics"},r.a.createElement(G,null)),r.a.createElement(H.a,{trigger:"Modify Data"},r.a.createElement(Y,{data_correction_page_status:this.get_data_correction_page_status})),r.a.createElement(H.a,{trigger:"View Comments"},r.a.createElement(q,{savedCommentData:t}),r.a.createElement("br",null),r.a.createElement(Q,{savedCommentData:this.get_comments_modal_data}),r.a.createElement("br",null)),r.a.createElement(H.a,{trigger:"View Map Errors"},r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View All"),r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View Self Intersecting Boundaries"),r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View Open Borders"),r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View Gaps in Precinct Coverage"),r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View Precinct Multipolygon"),r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View Overlapping Precincts"))):r.a.createElement("div",null,"Click on a highlighted state to view details")}}]),t}(a.Component),Z=n(90),$=n(91);function K(){var e=Object(Z.a)(["\n  &:hover {\n    background: ",";\n  }\n  &:active: {\n    background: ",";\n  }\n"]);return K=function(){return e},e}function ee(){var e=Object(Z.a)(["\n  position: absolute;\n  left: 52px;\n  padding: 4px;\n  background: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  min-width: 100px;\n  max-width: 300px;\n  height: 24px;\n  font-size: 12px;\n  z-index: 9;\n  pointer-events: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return ee=function(){return e},e}function te(){var e=Object(Z.a)(["\n  max-width: 20px !important;\n"]);return te=function(){return e},e}function ne(){var e=Object(Z.a)(["\n  height: 34px;\n  width: 34px;\n  padding: 7px;\n  display: flex;\n  justify-content: left;\n  color: ",";\n  background: ",";\n"]);return ne=function(){return e},e}function ae(){var e=Object(Z.a)(["\n  position: absolute;\n//   width: 48px;\n  left: 260px;\n  top: 240px;\n  background: #fff;\n  box-shadow: 0 0 4px rgba(0, 0, 0, 0.15);\n  outline: none;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  padding: 0px;\n  margin: 0px;\n"]);return ae=function(){return e},e}var re=[{id:S.EditorModes.SELECT,text:"Edit Feature",icon:"icon-select.svg"},{id:S.EditorModes.DRAW_POINT,text:"Draw Point",icon:"icon-point.svg"},{id:S.EditorModes.DRAW_PATH,text:"Draw Polyline",icon:"icon-path.svg"},{id:S.EditorModes.DRAW_POLYGON,text:"Draw Polygon",icon:"icon-polygon.svg"},{id:S.EditorModes.DRAW_RECTANGLE,text:"Draw Rectangle",icon:"icon-rectangle.svg"}],oe=$.a.div(ae()),le=$.a.div(ne(),(function(e){return e.selected?"#ffffff":"inherit"}),(function(e){return e.selected?"#0071bc":e.hovered?"#e6e6e6":"inherit"})),ie=$.a.img(te()),ce=$.a.div(ee()),se=Object($.a)(le)(K(),(function(e){return e.selected?"#0071bc":"#e6e6e6"}),(function(e){return e.selected?"#0071bc":"inherit"})),ue=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e)))._onHover=function(e){n.setState({hoveredId:e&&e.target.id})},n._onDelete=function(){n.props.onDelete(),n.setState({deleting:!0}),setTimeout((function(){return n.setState({deleting:!1})}),500)},n._onSaveChange=function(){console.log(n.props.features),n.props.toolBarRequest(n.props.features.data)},n.state={deleting:!1,hoveredId:null},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.selectedMode,n=this.state.hoveredId;return r.a.createElement(oe,null,re.map((function(a){return r.a.createElement(le,{onClick:e.props.onSwitchMode,onMouseOver:e._onHover,onMouseOut:function(t){return e._onHover(null)},selected:a.id===t,hovered:a.id===n,key:a.id,id:a.id},r.a.createElement(ie,{id:a.id,onMouseOver:e._onHover,src:a.icon}),n===a.id&&r.a.createElement(ce,null,a.text))})),r.a.createElement(se,{selected:this.state.deleting,onClick:this._onDelete,onMouseOver:this._onHover,onMouseOut:function(t){return e._onHover(null)}},r.a.createElement(ie,{id:"delete",onMouseOver:this._onHover,src:"icon-delete.svg"}),"delete"===n&&r.a.createElement(ce,null,"Delete")),r.a.createElement(le,{onClick:function(){return e._onSaveChange()},onMouseOver:this._onHover,onMouseOut:function(t){return e._onHover(null)},id:"saveDrawBtn"},r.a.createElement("span",{style:{fontSize:"10px"}}," save")))}}]),t}(a.PureComponent),de=function(e){function t(e){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).call(this,e))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(R.a,null,r.a.createElement(R.a.Toggle,{variant:"success",id:"userModeSelect"},"Switch User Mode"),r.a.createElement(R.a.Menu,null,r.a.createElement(R.a.Item,{onClick:function(){return e.props.userModeSelect("View")}},"View"),r.a.createElement(R.a.Item,{onClick:function(){return e.props.userModeSelect("Edit")}},"Edit")))}}]),t}(a.Component),me=n(181),pe=n(182),he=n.n(pe),fe=n(135),Ee=n.n(fe),ve=n(183),ge=n.n(ve),be="pk.eyJ1Ijoic2hvcnRsYW5kIiwiYSI6ImNqeXVzOWhsbjBpYzczY29hNGZycTlqdXAifQ.B6l-uEqGG-Pw6-quz4eflQ",ye=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).mapRef=r.a.createRef(),n.handleViewportChange=function(e){n.setState({viewport:Object(c.a)({},n.state.viewport,{},e)})},n.handleGeocoderViewportChange=function(e){return n.handleViewportChange(Object(c.a)({},e,{},{transitionDuration:1e3}))},n.handleOnResult=function(e){console.log(e.result),n.setState({searchResultLayer:new _.a({id:"search-result",data:e.result.geometry,getFillColor:[255,0,0,128],getRadius:1e3,pointRadiusMinPixels:10,pointRadiusMaxPixels:10})})},n._onDelete=function(){var e=n.state.selectedFeatureIndex;if(null!==e&&void 0!==e){O.b.info("Selected precinct is deleted",{position:O.b.POSITION.BOTTOM_RIGHT});var t=n.state.features;e>-1&&t.data.splice(e,1),n.setState({selectedFeatureIndex:null,selectedMode:S.EditorModes.READ_ONLY,features:t}),n._editorRef.deleteFeatures(e)}else O.b.info("Please select a new created precint before deleting action",{position:O.b.POSITION.BOTTOM_RIGHT})},n._switchMode=function(e){var t=e.target.id;t===n.state.selectedMode&&(t=null),n.setState({selectedMode:t})},n._onSelect=function(e){n.setState({selectedFeatureIndex:e&&e.selectedFeatureIndex})},n._onUpdate=function(e){n.setState({features:e,selectedMode:S.EditorModes.READ_ONLY,selectedFeatureIndex:null})},n._onSaveRequest=function(e){if(e){var t=n.state.features.data[n.state.selectedFeatureIndex];console.log(t),n.setState({selectedMode:S.EditorModes.READ_ONLY,selectedFeatureIndex:null}),t?O.b.info("New precinct is saved",{position:O.b.POSITION.BOTTOM_RIGHT}):O.b.info("Please select a new created precint to save",{position:O.b.POSITION.BOTTOM_RIGHT})}},n._renderToolbar=function(){return"Edit"===n.state.userMode?r.a.createElement(ue,{selectedMode:n.state.selectedMode,onSwitchMode:n._switchMode,onDelete:n._onDelete,onSelect:n._onSelect,features:n.state.features,selectedFeatureId:n.state.selectedFeatureId,toolBarRequest:n._onSaveRequest}):void 0},n._onClick=function(e){var t=e.features,a=t&&t.find((function(e){return"stateFill"===e.layer.id}));if(a){if(n.state.selectedFeature){if(a.properties.name===n.state.selectedFeature.properties.name)return void n._zoomToFeature(e)}else O.b.info("Click the same feature (state/county) again to zoom in.",{position:O.b.POSITION.BOTTOM_RIGHT});n.setState({selectedFeature:a})}else{var r=t&&t.find((function(e){return"countyFill"===e.layer.id}));if(r)return n.state.selectedFeature&&r.properties.NAME===n.state.selectedFeature.properties.NAME?void n._zoomToFeature(e):void n.setState({selectedFeature:r});var o=t&&t.find((function(e){return"precinctFill"===e.layer.id}));o&&n.setState({selectedFeature:o})}},n._onHover=function(e){var t=e.features,a=e.srcEvent,r=a.x,o=a.y;if(e.type&&e.features&&0!==e.features.length&&"composite"!==e.features[0].source){console.log(e),0!==r&&0!==o&&n.setState({x:r,y:o});var l=t&&t.find((function(e){return"stateFill"===e.layer.id}));if(n.setState({stateHovered:l}),l)n.setState({stateFilter:["==","name",l.properties.name]});else{var i=t&&t.find((function(e){return"countyFill"===e.layer.id}));if(n.setState({countyHovered:i}),i)n.setState({countyFilter:["==","NAME",i.properties.NAME]});else{var c=t&&t.find((function(e){return"precinctFill"===e.layer.id}));n.setState({precinctHovered:c}),c&&n.setState({precinctFilter:["==","GEOID10",c.properties.GEOID10]})}}}else n.setState({stateHovered:null,countyHovered:null,precinctHovered:null,stateFilter:["==","name",""],countyFilter:["==","NAME",""],precinctFilter:["==","GEOID10",""]})},n.userModeSelect=function(e){e&&n.setState({userMode:e})},n._onClickError=function(e){n.setState({popupInfo:e}),console.log(e),n.setState({viewport:Object(c.a)({},n.state.viewport,{longitude:e.longitude,latitude:e.latitude,transitionDuration:1e3,zoom:11})})},n.state={countyData:null,countyDataOutline:null,stateData:null,hoveredFeature:null,precinctData:null,viewport:{width:"100%",height:window.innerHeight-56,latitude:37.0902,longitude:-105.7129,zoom:3.3},popupInfo:null,selectedFeature:null,selectedMode:S.EditorModes.READ_ONLY,selectedFeatureId:null,shouldShowPins:!1,features:{},selectedFeatureIndex:null,userMode:"View",countyFilter:["==","NAME",""],precinctFilter:["==","GEOID10",""],stateFilter:["==","name",""]},n._editorRef=null,n.showErrorPins=n.showErrorPins.bind(Object(p.a)(n)),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(g.a)(he.a,(function(t,n){t||e.setState({stateData:n})})),Object(g.a)(Ee.a,(function(t,n){t||e.setState({countyDataOutline:n})})),Object(g.a)(Ee.a,(function(t,n){t||e.setState({countyData:n})})),Object(g.a)(ge.a,(function(t,n){t||e.setState({precinctData:n})}))}},{key:"_zoomToFeature",value:function(e){var t=e.features[0];if(t)if("stateFill"!==t.layer.id&&"countyFill"!==t.layer.id);else{var n=y()(t),a=Object(i.a)(n,4),r=a[0],o=a[1],l=a[2],s=a[3],u=new f.WebMercatorViewport(this.state.viewport).fitBounds([[r,o],[l,s]],{padding:40}),d=u.longitude,m=u.latitude,p=u.zoom;this.setState({viewport:Object(c.a)({},this.state.viewport,{longitude:d,latitude:m,zoom:p,transitionInterpolator:new f.LinearInterpolator({around:[e.offsetCenter.x,e.offsetCenter.y]}),transitionDuration:1e3})})}}},{key:"_renderTooltip",value:function(){var e=this.state,t=e.stateHovered,n=e.countyHovered,a=e.precinctHovered,o=e.x,l=e.y;return t?t&&r.a.createElement("div",{className:"state-tooltip",style:{left:o,top:l}},r.a.createElement("h5",null,t.properties.name),r.a.createElement("div",null,"Counties: ",t.properties.amount_counties)):n?n&&r.a.createElement("div",{className:"state-tooltip",style:{left:o,top:l}},r.a.createElement("h5",null,n.properties.NAME," County"),r.a.createElement("div",null,"FIPS Code: ",n.properties.FIPS_CODE)):a?a&&r.a.createElement("div",{className:"state-tooltip",style:{left:o,top:l}},r.a.createElement("h5",null,"Precinct GEOID: ",a.properties.GEOID10)):void 0}},{key:"stateSelect",value:function(e){var t,n=0,a=0;switch(e){case"New York":case"NY":n=43.2994,a=-76.2179,t=6;break;case"Wisconsin":case"WI":n=44.7844,a=-89.7879,t=6;break;case"Utah":case"UT":n=39.321,a=-112.0937,t=6}this.setState({viewport:Object(c.a)({},this.state.viewport,{latitude:n,longitude:a,zoom:t})})}},{key:"_renderErrorPopup",value:function(){var e=this,t=this.state.popupInfo;return t&&r.a.createElement(f.Popup,{tipSize:5,anchor:"top",longitude:t.longitude,latitude:t.latitude,closeOnClick:!1,onClose:function(){return e.setState({popupInfo:null})}},r.a.createElement(P,{info:t}))}},{key:"showErrorPins",value:function(){this.state.shouldShowPins?this.setState({shouldShowPins:!1}):this.setState({shouldShowPins:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.viewport,a=t.stateData,o=t.countyDataOutline,l=t.countyData,i=t.precinctData,c=t.selectedMode,s=t.shouldShowPins,u=t.stateFilter,d=t.countyFilter,m=t.precinctFilter;return r.a.createElement("div",{className:"App"},r.a.createElement(E.a,{bg:"dark",expand:"lg",variant:"dark"},r.a.createElement(E.a.Brand,{href:"#home"},"Election Data Quality"),r.a.createElement(E.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(E.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(v.a,{className:"mr-auto"},r.a.createElement(T,{select_state:function(t){return e.stateSelect.bind(e,t)}}),r.a.createElement(de,{userModeSelect:function(t){return e.userModeSelect(t)}})))),r.a.createElement("div",null,r.a.createElement("div",{id:"leftCol"},r.a.createElement(X,{selected:this.state.selectedFeature,showErrorPins:this.showErrorPins.bind(this)})),r.a.createElement(f.default,Object.assign({},n,{onViewportChange:function(t){return e.setState({viewport:t})},mapStyle:"mapbox://styles/shortland/ck7fn4gmu014c1ip60jlumnm2",mapboxApiAccessToken:be,onHover:this._onHover,onClick:this._onClick,doubleClickZoom:!1,ref:this.mapRef}),r.a.createElement(S.Editor,{ref:function(t){return e._editorRef=t},clickRadius:12,onSelect:function(t){return e._onSelect(t)},onUpdate:function(t){return e._onUpdate(t)},mode:c}),r.a.createElement(C.a,{mapRef:this.mapRef,onResult:this.handleOnResult,onViewportChange:this.handleGeocoderViewportChange,mapboxApiAccessToken:be,position:"top-right"}),r.a.createElement("div",{className:"FullScreenController MapControllers"},r.a.createElement(f.FullscreenControl,null)),r.a.createElement("div",{className:"NavigationController MapControllers"},r.a.createElement(f.NavigationControl,null)),r.a.createElement("div",{className:"ScaleController MapControllers"},r.a.createElement(f.ScaleControl,null)),r.a.createElement(f.Source,{type:"geojson",data:a},r.a.createElement(f.Layer,Object.assign({},x,{filter:u,maxzoom:5})),r.a.createElement(f.Layer,Object.assign({},M,{maxzoom:5}))),r.a.createElement(f.Source,{type:"geojson",data:l},r.a.createElement(f.Layer,Object.assign({},w,{filter:d,minzoom:5,maxzoom:8})),r.a.createElement(f.Layer,Object.assign({},j,{minzoom:5,maxzoom:8}))),r.a.createElement(f.Source,{type:"geojson",data:o},r.a.createElement(f.Layer,Object.assign({},k,{minzoom:5}))),r.a.createElement(f.Source,{type:"geojson",data:i},r.a.createElement(f.Layer,Object.assign({},I,{filter:m,minzoom:8})),r.a.createElement(f.Layer,Object.assign({},F,{minzoom:8})),r.a.createElement(f.Layer,Object.assign({},D,{minzoom:8}))),this._renderTooltip(),this._renderToolbar(),r.a.createElement(N,{data:me,onClick:this._onClickError,shouldShowPins:s}),this._renderErrorPopup())),r.a.createElement(O.a,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ye,null),document.getElementById("map")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[197,1,2]]]);
//# sourceMappingURL=main.d7fad857.chunk.js.map