(this["webpackJsonp416-app"]=this["webpackJsonp416-app"]||[]).push([[0],{135:function(e,t){},178:function(e){e.exports=JSON.parse('[{"type":"self intersecting border","from":"preprocessing","latitude":40.6643,"longitude":-79.9385},{"type":"open borders","from":"preprocessing","latitude":43.633461,"longitude":-76.797859},{"type":"gaps precinct coverage","from":"preprocessing","latitude":40.6071584,"longitude":-74.0881154},{"type":"precinct multi polygon","from":"preprocessing","latitude":42.1936482,"longitude":-74.135364},{"type":"overlapping precincts","from":"preprocessing","latitude":33.5722,"longitude":-112.088}]')},179:function(e,t,r){e.exports=r.p+"static/media/New_York_National_Parks.e4acd6e7.GeoJSON"},180:function(e,t,r){e.exports=r.p+"static/media/Wisconsin_National_Parks.e6f6ecd3.GeoJSON"},181:function(e,t,r){e.exports=r.p+"static/media/Utah_National_Parks.cc5c7638.GeoJSON"},195:function(e,t,r){e.exports=r(334)},200:function(e,t,r){},315:function(e,t,r){},316:function(e,t,r){},317:function(e,t,r){},318:function(e,t,r){},329:function(e,t){},334:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),i=r(40),o=r.n(i),c=(r(200),r(10)),s=r.n(c),l=r(17),u=r(13),d=r(69),p=r(4),h=r(3),m=r(7),f=r(5),v=r(6),g=r(8),E=r(22),y=r(70),b=r(121),O=r(132),k=r.n(O),S=r(24),C=r(347),I=r(165),N=r(49),P=function(){function e(){Object(p.a)(this,e),this.asyncFetch=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.allStates=null,this.baseUrl="https://ElectionDataQuality.com:1234/"}return Object(h.a)(e,[{key:"fetchAllStates",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"allStates");case 2:if("ok"==(t=e.sent).status){e.next=6;break}return alert("server error: unable to get data"),e.abrupt("return");case 6:for(a in r={type:"FeatureCollection",features:[]},t.content)n={type:"Feature",properties:{name:t.content[a].name,id:t.content[a].id,congressional_districts:t.content[a].congressionalDistrictIds},id:t.content[a].id,geometry:t.content[a].geometry},r.features.push(n);return e.abrupt("return",{featureCollection:r});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCongressionalDistrictByState",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"congressionalDistrictsForState?stateId=".concat(t));case 2:if("ok"==(r=e.sent).status){e.next=6;break}return alert("server error: unable to get data"),e.abrupt("return");case 6:for(a=r.content.features,n=0;n<a.length;n++)i=a[n],o={id:i.id,name:i.name,parentId:i.parentId,childrenId:i.childrenId},delete i.name,delete i.parentId,delete i.childrenId,i.properties=o;return r.content.features=a,e.abrupt("return",r.content);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAllCongressionalDistricts",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"allCongressionalDistricts");case 2:if("ok"==(t=e.sent).status){e.next=6;break}return alert("server error: unable to get data"),e.abrupt("return");case 6:return e.abrupt("return",t.content);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCountiesByState",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"countiesInState?stateId=".concat(t));case 2:if("ok"==(r=e.sent).status){e.next=6;break}return alert("server error: unable to get data"),e.abrupt("return");case 6:for(n in a={type:"FeatureCollection",features:[]},r.content)i={type:"Feature",properties:{name:r.content[n].name,id:r.content[n].countyId},id:r.content[n].countyId,geometry:r.content[n].geometry},a.features.push(i);return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchShapeOfPrecinctsByCounty",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"shapeOfPrecinctByCounty?countyId=".concat(t));case 2:if("ok"==(r=e.sent).status){e.next=7;break}return console.log(r),alert("server error: unable to get precinct shapes"),e.abrupt("return");case 7:for(n in a={type:"FeatureCollection",features:[]},r.content)i={type:"Feature",properties:{id:r.content[n].id},geometry:r.content[n].geometry,id:r.content[n].id},a.features.push(i);return console.log(a),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPrecinctShape",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"shapeOfPrecinct?precinctId=".concat(t));case 2:if("ok"==(r=e.sent).status){e.next=7;break}return console.log(r),alert("server error: unable to get precinct shapes"),e.abrupt("return");case 7:return a={type:"FeatureCollection",features:[]},n={type:"Feature",properties:{id:r.content.id},geometry:r.content.geometry,id:r.content.id},a.features.push(n),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPrecinctInfo",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"precinctInfo?precinctId=".concat(t));case 2:if("ok"==(r=e.sent).status){e.next=7;break}return console.log(r),alert("server error : unable to get precinct info"),e.abrupt("return");case 7:return e.abrupt("return",r.content);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addPrecinctNeighbor",value:function(){var e=Object(l.a)(s.a.mark((function e(t,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"addPrecinctNeighbor?precinctId1=".concat(t)+"&precinctId2=".concat(r));case 2:if("ok"==(a=e.sent).status){e.next=7;break}return console.log(a),alert("server error : unable to add"+t+" and "+r+" as neighbor"),e.abrupt("return");case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deletePrecinctNeighbor",value:function(){var e=Object(l.a)(s.a.mark((function e(t,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"deletePrecinctNeighbor?precinctId1=".concat(t)+"&precinctId2=".concat(r));case 2:if("ok"==(a=e.sent).status){e.next=7;break}return console.log(a),alert("server error : unable to delete"+t+" and "+r+" as neighbor"),e.abrupt("return");case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"mergePrecinct",value:function(){var e=Object(l.a)(s.a.mark((function e(t,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"mergePrecinct?precinctId1=".concat(t)+"&precinctId2=".concat(r));case 2:if("ok"==(a=e.sent).status){e.next=7;break}return console.log(a),alert("server error : unable to merge"+t+" and "+r),e.abrupt("return");case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchAllPrecinctError",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"getAllError");case 2:if("ok"==(t=e.sent).status){e.next=7;break}return console.log(t),alert("server error : unable to get precinctErrors"),e.abrupt("return");case 7:return e.abrupt("return",t.content);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),_=(r(315),r(316),r(317),r(318),r(319),r(320),r(321),r(322),r(68)),D={id:"countyFill",type:"fill",paint:{"fill-color":"#0779e4","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.6,.3]}},w={id:"countyOutline",type:"line",paint:{"line-color":"#000000","line-width":2,"line-opacity":.4},layout:{"line-join":"round"}},j={id:"stateFill",type:"fill",paint:{"fill-color":"#0779e4","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.75,.5]}},T={id:"stateOutline",type:"line",paint:{"line-color":"#000000","line-width":2,"line-opacity":.4},layout:{"line-join":"round"}},F={id:"precinctFill",type:"fill",paint:{"fill-color":["case",["boolean",["feature-state","neighbor"],!1],"rgba(144, 12, 63, 0.9)",["boolean",["feature-state","selected"],!1],"rgba(144, 12, 63, 1.0)","rgba(144, 12, 63, 0.8)"],"fill-opacity":["case",["boolean",["feature-state","selected"],!1],.9,["boolean",["feature-state","hover"],!1],.8,["boolean",["feature-state","neighbor"],!1],.6,.4]}},R={id:"precinctOutline",type:"line",paint:{"line-color":"#000000","line-opacity":.5,"line-width":2},layout:{"line-join":"round"}},x={id:"congressionalFill",type:"fill",paint:{"fill-color":"#27496d","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.6,.4]}},A={id:"congressionalOutline",type:"line",paint:{"line-color":"#FFFFFF","line-width":4,"line-opacity":.5},layout:{"line-join":"round"}},B={id:"parkFill",type:"fill",paint:{"fill-color":"rgb(34, 139, 34)","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.9,.7]}},M={id:"parkOutline",type:"line",paint:{"line-color":"#000000","line-width":2,"line-opacity":.6},layout:{"line-join":"round"}},L=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,r=e.onClick,a=e.shouldShowPins;return console.log(a),a?(console.log("should show pins"),t.map((function(e,t){return n.a.createElement(E.Marker,{key:"marker-".concat(t),longitude:e.longitude,latitude:e.latitude},n.a.createElement("svg",{height:20,viewBox:"0 0 24 24",style:{cursor:"pointer",fill:"#d00",stroke:"none",transform:"translate(".concat(-10,"px,").concat(-20,"px)")},onClick:function(){return r(e)}},n.a.createElement("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"})))}))):n.a.createElement("span",null)}}]),t}(a.PureComponent),H=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.info;return n.a.createElement("div",null,n.a.createElement("h3",null,"Map Error"),n.a.createElement("br",null),n.a.createElement("p",{style:{textAlign:"left"}},"Type: ",e.type,n.a.createElement("br",null),"Source: ",e.from))}}]),t}(a.PureComponent),G=r(26),U=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return n.a.createElement(G.a,null,n.a.createElement(G.a.Toggle,{variant:"info",id:"dropdown-basic"},"Select State"),n.a.createElement(G.a.Menu,null,n.a.createElement(G.a.Item,{href:"#/NewYork",onClick:this.props.select_state("NY")},"New York"),n.a.createElement(G.a.Item,{href:"#/Utah",onClick:this.props.select_state("UT")},"Utah"),n.a.createElement(G.a.Item,{href:"#/Wisconsin",onClick:this.props.select_state("WI")},"Wisconsin")))}}]),t}(a.Component),z=r(61),W=r.n(z),Y=r(88),V=r(25),q=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={votingData:e.votingData,election:2016,presidental:void 0,congressional:void 0},r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"getAllElection",value:function(){var e=this.state.votingData;if(void 0!==e){var t=Object.keys(e.electionData);return 0===t.length?void 0:t}}},{key:"getResults",value:function(e){var t=this.state.votingData;if(void 0!==t){var r=Object.keys(t.electionData),a=[];for(var n in r)r[n].includes(e.toString())&&a.push(r[n]);var i={},o=t.electionData;for(var c in a)i[a[c]]=o[a[c]].resultsByParty;return i}}},{key:"changeElection",value:function(e){var t=this.getResults(e),r=Object.keys(t);for(var a in this.setState({election:e,presidental:void 0,congressional:void 0}),r)r[a].includes("PRES")?this.setState({presidental:t[r[a]]}):r[a].includes("CONG")&&this.setState({congressional:t[r[a]]})}},{key:"yearButtons",value:function(e){if(e){var t=[];for(var r in e){var a=e[r].substring(4,9);t.includes(a)||t.push(a)}var i=[];for(var o in t)i.push(n.a.createElement(V.a,{variant:"outline-primary",id:"btn"+o.toString(),className:"button",onClick:this.changeElection.bind(this,parseInt(t[o]))},t[o]));return i}}},{key:"render",value:function(){var e=this.getAllElection();void 0!==e&&void 0===this.state.presidental&&void 0===this.state.congressional&&this.changeElection(e[0].substring(4,9));var t=this.state.presidental,r=this.state.congressional;return void 0!==t&&void 0!==r?n.a.createElement("div",null,n.a.createElement(Y.a,{size:"sm",className:"mt-3"},this.yearButtons(e)),n.a.createElement("br",null),n.a.createElement("hr",null),"Presidential:",n.a.createElement("div",{className:"BarDisplay"},n.a.createElement("div",{className:"BlueBar Demographic",style:{width:t.DEMOCRAT+"%"}},"Democrat\n"+t.DEMOCRAT),n.a.createElement("div",{className:"RedBar Replublican",style:{width:t.REPUBLICAN+"%"}},"Republican\n"+t.REPUBLICAN),n.a.createElement("div",{className:"GreenBar Libratarian",style:{width:t.LIBRATARIAN+"%"}},"Libratarian\n"+t.LIBRATARIAN),n.a.createElement("div",{className:"YellowBar Other",style:{width:t.OTHER+"%"}},"Other\n"+t.OTHER)),n.a.createElement("br",null),n.a.createElement("hr",null),"Congressional:",n.a.createElement("div",{className:"BarDisplay"},n.a.createElement("div",{className:"BlueBar Demographic",style:{width:r.DEMOCRAT+"%"}},"Democrat\n"+r.DEMOCRAT),n.a.createElement("div",{className:"RedBar Replublican",style:{width:r.REPUBLICAN+"%"}},"Republican\n"+r.REPUBLICAN),n.a.createElement("div",{className:"GreenBar Libratarian",style:{width:r.LIBRATARIAN+"%"}},"Libratarian\n"+r.LIBRATARIAN),n.a.createElement("div",{className:"YellowBar Other",style:{width:r.OTHER+"%"}},"Other\n"+r.OTHER)),n.a.createElement("a",{className:"dataSource",href:"https://electionlab.mit.edu/data"},"source")):void 0!==t&&void 0===r?n.a.createElement("div",null,n.a.createElement(Y.a,{size:"sm",className:"mt-3"},this.yearButtons(e)),n.a.createElement("br",null),n.a.createElement("hr",null),"Presidential:",n.a.createElement("div",{className:"BarDisplay"},n.a.createElement("div",{className:"BlueBar Demographic",style:{width:t.DEMOCRAT+"%"}},"Democrat\n"+t.DEMOCRAT),n.a.createElement("div",{className:"RedBar Replublican",style:{width:t.REPUBLICAN+"%"}},"Republican\n"+t.REPUBLICAN),n.a.createElement("div",{className:"GreenBar Libratarian",style:{width:t.LIBRATARIAN+"%"}},"Libratarian\n"+t.LIBRATARIAN),n.a.createElement("div",{className:"YellowBar Other",style:{width:t.OTHER+"%"}},"Other\n"+t.OTHER)),n.a.createElement("a",{className:"dataSource",href:"https://electionlab.mit.edu/data"},"source")):void 0===t&&void 0!==r?n.a.createElement("div",null,n.a.createElement(Y.a,{size:"sm",className:"mt-3"},this.yearButtons(e)),n.a.createElement("br",null),n.a.createElement("hr",null),"Congressional:",n.a.createElement("div",{className:"BarDisplay"},n.a.createElement("div",{className:"BlueBar Demographic",style:{width:r.DEMOCRAT+"%"}},"Democrat\n"+r.DEMOCRAT),n.a.createElement("div",{className:"RedBar Replublican",style:{width:r.REPUBLICAN+"%"}},"Republican\n"+r.REPUBLICAN),n.a.createElement("div",{className:"GreenBar Libratarian",style:{width:r.LIBRATARIAN+"%"}},"Libratarian\n"+r.LIBRATARIAN),n.a.createElement("div",{className:"YellowBar Other",style:{width:r.OTHER+"%"}},"Other\n"+r.OTHER)),n.a.createElement("a",{className:"dataSource",href:"https://electionlab.mit.edu/data"},"source")):n.a.createElement("div",null,"No ElectionData")}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.votingData!==t.votingData?{votingData:e.votingData,presidental:void 0,congressional:void 0}:null}}]),t}(a.Component),J=r(171),K=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(m.a)(this,Object(f.a)(t).call(this,e))).total=0,r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"calculateTotal",value:function(){if(this.props.demographicData){var e=0,t=this.props.demographicData.demographic;for(var r in t)e+=t[r];this.total=e}}},{key:"getPopulation",value:function(e){return this.props.demographicData?this.props.demographicData.demographic[e]:0}},{key:"getPercentage",value:function(e){if(this.props.demographicData){var t=this.props.demographicData.demographic;return 0===t[e]?0:t[e]/this.state.total*100}return 0}},{key:"render",value:function(){return this.calculateTotal(),n.a.createElement("div",null,n.a.createElement(J.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Race"),n.a.createElement("th",null,"Num"))),n.a.createElement("tbody",{className:"text-left"},n.a.createElement("tr",null,n.a.createElement("th",null,"White"),n.a.createElement("td",null,this.getPopulation("WHITE"))),n.a.createElement("tr",null,n.a.createElement("th",null,"Black"),n.a.createElement("td",null,this.getPopulation("BLACK"))),n.a.createElement("tr",null,n.a.createElement("th",null,"Native_American"),n.a.createElement("td",null,this.getPopulation("NATIVE_AMERICAN"))),n.a.createElement("tr",null,n.a.createElement("th",null,"Asian"),n.a.createElement("td",null,this.getPopulation("ASIAN"))),n.a.createElement("tr",null,n.a.createElement("th",null,"Native_Hawaiian"),n.a.createElement("td",null,this.getPopulation("NATIVE_HAWAIIAN"))),n.a.createElement("tr",null,n.a.createElement("th",null,"Other"),n.a.createElement("td",null,this.getPopulation("OTHER")))),n.a.createElement("tfoot",null,n.a.createElement("tr",null,n.a.createElement("th",{colSpan:"1"},"Total Population"),n.a.createElement("td",null,this.total)))),n.a.createElement("a",{className:"dataSource",href:"https://electionlab.mit.edu/data"},"source"))}}]),t}(a.PureComponent),Q=function(e){function t(e){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).call(this,e))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"save_changes",value:function(){this.dismiss()}},{key:"dismiss",value:function(){this.props.data_correction_page_status("done")}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"data_correction_page"},n.a.createElement("h4",null,"Data Correction Form"),n.a.createElement(y.a,null,n.a.createElement(y.a.Group,{controlId:"data_correction.target_data"},n.a.createElement(y.a.Label,null,"Data for correction"),n.a.createElement(y.a.Control,{as:"select"},n.a.createElement("option",null,"Demographic"),n.a.createElement("option",null,"Election"))),n.a.createElement(y.a.Group,{controlId:"data_correction.value"},n.a.createElement(y.a.Label,null,"Changed Value"),n.a.createElement(y.a.Control,{type:"value",placeholder:"Please enter corrected data"}))),n.a.createElement("div",{className:"data_correction_Btns"},n.a.createElement(V.a,{variant:"outline-primary",id:"data_change",onClick:function(){e.save_changes()}},"Change"),n.a.createElement(V.a,{variant:"outline-primary",id:"data_change_cancel",onClick:function(){e.dismiss()}},"Cancel")),n.a.createElement("br",null))}}]),t}(a.Component),X=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={mode:"default",dynamicAddNeighbor:!1},r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"getAllNeighbors",value:function(){var e=this.props.selectedFeature.properties.neighborsId,t=[];for(var r in e)t.push(n.a.createElement("li",null,e[r]));return t}},{key:"switchMode",value:function(e){this.setState({mode:e}),this.props.modify_neighbors_page_status(e)}},{key:"saveAction",value:function(){var e=this,t=this.state.mode,r=this.props.selectedFeature.id,a=this.props.precinctSelectedForEdit;"add"===t?(this.setState({mode:"default"}),a&&this.props.appData.addPrecinctNeighbor(r,a).then((function(t){console.log(t),e.dynamicAddNeighborId(a),e.forceUpdate()})),this.props.modify_neighbors_page_status("default")):(this.setState({mode:"default"}),a&&this.props.appData.deletePrecinctNeighbor(r,a).then((function(t){console.log(t),e.dynamicDeleteNeighborId(a),e.forceUpdate()})),this.props.modify_neighbors_page_status("default"))}},{key:"dynamicAddNeighborId",value:function(e){this.props.selectedFeature.properties.neighborsId.push(e.toString().trim())}},{key:"dynamicDeleteNeighborId",value:function(e){var t=this.props.selectedFeature.properties.neighborsId,r=[];for(var a in t)t[a].toString().trim()!==e.toString().trim()&&r.push(t[a]);this.props.selectedFeature.properties.neighborsId=r}},{key:"render",value:function(){var e=this,t=this.state.mode;return"default"===t?n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement(V.a,{id:"addButton",variant:"primary",onClick:function(t){e.switchMode("add")}},"Add Neighbor"),n.a.createElement("br",null),n.a.createElement(V.a,{id:"deleteButton",variant:"danger",onClick:function(t){e.switchMode("delete")}},"Delete Neighbor"),n.a.createElement("br",null),n.a.createElement("hr",null),n.a.createElement("h5",null,"Current Neighbors"),n.a.createElement("div",null,n.a.createElement("ul",null,this.getAllNeighbors())),n.a.createElement("br",null)):"add"===t?n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement("h5",null,"Add Nieghbors"),n.a.createElement("hr",null),n.a.createElement("p",null,"Please select precincts from the map to add as neighbor"),n.a.createElement("hr",null),n.a.createElement("span",null,"Current Selected Precincts"),n.a.createElement("ul",null,n.a.createElement("li",null,this.props.precinctSelectedForEdit)),n.a.createElement("hr",null),n.a.createElement(V.a,{id:"saveButton_add",variant:"success",onClick:function(t){e.saveAction()}},"Save Changes"),n.a.createElement("br",null)):"delete"===t?n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement("h5",null,"Delete Nieghbors"),n.a.createElement("hr",null),n.a.createElement("p",null,"Please select neighbors from the map to delete"),n.a.createElement("hr",null),n.a.createElement("span",null,"Current Selected Precincts"),n.a.createElement("ul",null,n.a.createElement("li",null,this.props.precinctSelectedForEdit)),n.a.createElement("hr",null),n.a.createElement(V.a,{id:"saveButton_del",variant:"success",onClick:function(t){e.saveAction()}},"Save Changes"),n.a.createElement("br",null)):void 0}}]),t}(a.Component),Z=(a.Component,r(91)),$=(a.Component,a.Component,r(71)),ee=r(173),te=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={selectedErrorType:"GHOST",selectedFeature:null},r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"changeErrorType",value:function(e){this.setState({selectedErrorType:e})}},{key:"getErrorInState",value:function(e){var t=this.props.allErrors,r=[];for(var a in t)t[a].precinctId.slice(0,2)===e&&r.push(t[a]);return r}},{key:"createErrorListByType",value:function(){var e,t=this,r=this.props.selectedFeature;if(r){var a=r.id.toString().slice(0,2);e=this.getErrorInState(a)}var i=[],o=this.state.selectedErrorType;if("All"===o){var c=function(r){i.push(n.a.createElement($.a.Item,{onClick:function(){return t.props.errorListOnClick(e[r])}}," ",e[r].errorType+" "+e[r].precinctId))};for(var s in e)c(s)}else if("NO_VOTER"===o){var l=function(r){"NO_VOTER"===e[r].errorType&&i.push(n.a.createElement($.a.Item,{onClick:function(){return t.props.errorListOnClick(e[r])}}," ",e[r].errorType+" "+e[r].precinctId))};for(var u in e)l(u)}else if("NO_DEMOGRAPIHIC"===o){var d=function(r){"NO_DEMOGRAPIHIC"===e[r].errorType&&i.push(n.a.createElement($.a.Item,{onClick:function(){return t.props.errorListOnClick(e[r])}}," ",e[r].errorType+" "+e[r].precinctId))};for(var p in e)d(p)}else if("GHOST"===o){var h=function(r){"GHOST"===e[r].errorType&&i.push(n.a.createElement($.a.Item,{onClick:function(){return t.props.errorListOnClick(e[r])}}," ",e[r].errorType+" "+e[r].precinctId))};for(var m in e)h(m)}else if("OVERLAP"===o){var f=function(r){"OVERLAP"===e[r].errorType&&i.push(n.a.createElement($.a.Item,{onClick:function(){return t.props.errorListOnClick(e[r])}}," ",e[r].errorType+" "+e[r].precinctId))};for(var v in e)f(v)}else if("INTERSECTING"===o){var g=function(r){"INTERSECTING"===e[r].errorType&&i.push(n.a.createElement($.a.Item,{onClick:function(){return t.props.errorListOnClick(e[r])}}," ",e[r].errorType+" "+e[r].precinctId))};for(var E in e)g(E)}return i}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,"Errors",n.a.createElement("hr",null),n.a.createElement(ee.a,{title:this.state.selectedErrorType},n.a.createElement(G.a.Item,{as:"button",onClick:function(){return e.changeErrorType("All")}},"All"),n.a.createElement(G.a.Item,{as:"button",onClick:function(){return e.changeErrorType("NO_VOTER")}}," No voters"),n.a.createElement(G.a.Item,{as:"button",onClick:function(){return e.changeErrorType("NO_DEMOGRAPIHIC")}}," No demographic"),n.a.createElement(G.a.Item,{as:"button",onClick:function(){return e.changeErrorType("GHOST")}}," Ghost"),n.a.createElement(G.a.Item,{as:"button",onClick:function(){return e.changeErrorType("OVERLAP")}}," Overlap"),n.a.createElement(G.a.Item,{as:"button",onClick:function(){return e.changeErrorType("INTERSECTING")}}," Intersecting")),n.a.createElement($.a,null,this.createErrorListByType()),n.a.createElement("hr",null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.selectedFeature!==t.selectedFeature)return{selectedFeature:e.selectedFeature}}}]),t}(a.Component),re=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(m.a)(this,Object(f.a)(t).call(this,e))).createList=function(){var e=[],t=r.props.selected;if(t){var a=t.properties;for(var i in a)"demographicData"!==i&&"precinctError"!==i&&"votingData"!==i&&e.push(n.a.createElement("div",{className:"text-left"},"".concat(i,": ").concat(a[i])))}return e},r.get_data_correction_page_status=function(e){"done"===e&&r.setState({mode:"data_display"})},r.get_modify_neighbors_page_status=function(e){"default"!==e?r.props.leftSideBarStatus("precinct_selection_to_edit"):"default"===e?r.props.leftSideBarStatus("saveRequested"):r.props.leftSideBarStatus()},r.get_mapErrorList_onClick=function(e){r.props.errorListOnClick(e)},r.get_comments_modal_data=function(e){e&&r.setState({comment_data:e})},r._handleClick=function(e){r.props.showErrorPins()},r.state={mode:"data_display",comment_data:void 0},r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.userMode,t=(this.state.comment_data,this.createList()),r=this.props.selected?this.props.selected.properties.type:void 0,a=this.props.selected;if(t.length>0){if("View"===e)return n.a.createElement("div",{style:{textAlign:"left"}},n.a.createElement(W.a,{trigger:"General Info",open:!0},n.a.createElement("div",{style:{marginLeft:"5px"}},t)),n.a.createElement(W.a,{trigger:"Elections"},"Precinct"===a.properties.type&&n.a.createElement(q,{votingData:a.properties.votingData})||n.a.createElement("div",null,"select a precinct to view elections")),n.a.createElement(W.a,{trigger:"Demographics"},"Precinct"===a.properties.type&&n.a.createElement(K,{demographicData:a.properties.demographicData})||n.a.createElement("div",null,"select a precinct to view demographics")),n.a.createElement(W.a,{trigger:"Map Errors"},n.a.createElement(te,{selectedFeature:this.props.selected,allErrors:this.props.allErrors,errorListOnClick:this.get_mapErrorList_onClick})));if("Edit"===e)return"Precinct"===r?n.a.createElement("div",null,n.a.createElement(W.a,{trigger:"General Info",open:!0},t),n.a.createElement(W.a,{trigger:"Modify Data"},n.a.createElement(Q,{data_correction_page_status:this.get_data_correction_page_status})),n.a.createElement(W.a,{trigger:"Modify Neighbors"},n.a.createElement(X,{selectedFeature:a,modify_neighbors_page_status:this.get_modify_neighbors_page_status,precinctSelectedForEdit:this.props.precinctSelectedForEdit,appData:this.props.appData}))):n.a.createElement("div",null,n.a.createElement("h5",null),n.a.createElement(W.a,{trigger:"General Info",open:!0},t))}return n.a.createElement("div",null,"Click on a highlighted state to view details")}}]),t}(a.Component),ae=r(89),ne=r(90);function ie(){var e=Object(ae.a)(["\n  &:hover {\n    background: ",";\n  }\n  &:active: {\n    background: ",";\n  }\n"]);return ie=function(){return e},e}function oe(){var e=Object(ae.a)(["\n  position: absolute;\n  left: 52px;\n  padding: 4px;\n  background: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  min-width: 100px;\n  max-width: 300px;\n  height: 24px;\n  font-size: 12px;\n  z-index: 9;\n  pointer-events: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return oe=function(){return e},e}function ce(){var e=Object(ae.a)(["\n  max-width: 20px !important;\n"]);return ce=function(){return e},e}function se(){var e=Object(ae.a)(["\n  height: 34px;\n  width: 34px;\n  padding: 7px;\n  display: flex;\n  justify-content: left;\n  color: ",";\n  background: ",";\n"]);return se=function(){return e},e}function le(){var e=Object(ae.a)(["\n  position: absolute;\n//   width: 48px;\n  left: 260px;\n  top: 240px;\n  background: #fff;\n  box-shadow: 0 0 4px rgba(0, 0, 0, 0.15);\n  outline: none;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  padding: 0px;\n  margin: 0px;\n"]);return le=function(){return e},e}var ue=[{id:N.EditorModes.SELECT,text:"Edit Feature",icon:"icon-select.svg"},{id:N.EditorModes.DRAW_POINT,text:"Draw Point",icon:"icon-point.svg"},{id:N.EditorModes.DRAW_PATH,text:"Draw Polyline",icon:"icon-path.svg"},{id:N.EditorModes.DRAW_POLYGON,text:"Draw Polygon",icon:"icon-polygon.svg"},{id:N.EditorModes.DRAW_RECTANGLE,text:"Draw Rectangle",icon:"icon-rectangle.svg"}],de=ne.a.div(le()),pe=ne.a.div(se(),(function(e){return e.selected?"#ffffff":"inherit"}),(function(e){return e.selected?"#0071bc":e.hovered?"#e6e6e6":"inherit"})),he=ne.a.img(ce()),me=ne.a.div(oe()),fe=Object(ne.a)(pe)(ie(),(function(e){return e.selected?"#0071bc":"#e6e6e6"}),(function(e){return e.selected?"#0071bc":"inherit"})),ve=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(m.a)(this,Object(f.a)(t).call(this,e)))._onHover=function(e){r.setState({hoveredId:e&&e.target.id})},r._onDelete=function(){r.props.onDelete(),r.setState({deleting:!0}),setTimeout((function(){return r.setState({deleting:!1})}),500)},r._onSaveChange=function(){console.log(r.props.features),r.props.toolBarRequest(r.props.features.data)},r.state={deleting:!1,hoveredId:null},r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.selectedMode,r=this.state.hoveredId;return n.a.createElement(de,null,ue.map((function(a){return n.a.createElement(pe,{onClick:e.props.onSwitchMode,onMouseOver:e._onHover,onMouseOut:function(t){return e._onHover(null)},selected:a.id===t,hovered:a.id===r,key:a.id,id:a.id},n.a.createElement(he,{id:a.id,onMouseOver:e._onHover,src:a.icon}),r===a.id&&n.a.createElement(me,null,a.text))})),n.a.createElement(fe,{selected:this.state.deleting,onClick:this._onDelete,onMouseOver:this._onHover,onMouseOut:function(t){return e._onHover(null)}},n.a.createElement(he,{id:"delete",onMouseOver:this._onHover,src:"icon-delete.svg"}),"delete"===r&&n.a.createElement(me,null,"Delete")),n.a.createElement(pe,{onClick:function(){return e._onSaveChange()},onMouseOver:this._onHover,onMouseOut:function(t){return e._onHover(null)},id:"saveDrawBtn"},n.a.createElement("span",{style:{fontSize:"10px"}}," save")))}}]),t}(a.PureComponent),ge=(a.Component,function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.props.enabled?n.a.createElement(V.a,{variant:"success",size:"md",onClick:this.props.mergePrecincts},"Merge Precincts"):n.a.createElement(V.a,{variant:"success",size:"md",disabled:!0},"Merge Precincts")}}]),t}(a.Component)),Ee=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.props.enabled?n.a.createElement(Y.a,{toggle:!0},n.a.createElement(V.a,{variant:"warning",size:"md",onClick:this.props.addPrecinctNeighbor},"Add Neighborship"),n.a.createElement(V.a,{variant:"danger",size:"md",onClick:this.props.removePrecinctNeighbor},"Remove Neighborship")):n.a.createElement(n.a.Fragment,null)}}]),t}(a.Component),ye=r(178),be=r(179),Oe=r.n(be),ke=r(180),Se=r.n(ke),Ce=r(181),Ie=r.n(Ce),Ne="pk.eyJ1Ijoic2hvcnRsYW5kIiwiYSI6ImNqeXVzOWhsbjBpYzczY29hNGZycTlqdXAifQ.B6l-uEqGG-Pw6-quz4eflQ",Pe=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleViewportChange=function(e){r.setState({viewport:Object(d.a)({},r.state.viewport,{},e)})},r.handleGeocoderViewportChange=function(e){return r.handleViewportChange(Object(d.a)({},e,{},{transitionDuration:1e3}))},r.handleOnResult=function(e){console.log(e.result),r.setState({searchResultLayer:new C.a({id:"search-result",data:e.result.geometry,getFillColor:[255,0,0,128],getRadius:1e3,pointRadiusMinPixels:10,pointRadiusMaxPixels:10})})},r._onDelete=function(){var e=r.state.selectedFeatureIndex;if(null!==e&&void 0!==e){S.b.info("Selected precinct is deleted",{position:S.b.POSITION.BOTTOM_RIGHT});var t=r.state.features;e>-1&&t.data.splice(e,1),r.setState({selectedFeatureIndex:null,selectedMode:N.EditorModes.READ_ONLY,features:t}),r._editorRef.deleteFeatures(e)}else S.b.info("Please select a new created precint before deleting action",{position:S.b.POSITION.BOTTOM_RIGHT})},r._switchMode=function(e){var t=e.target.id;t===r.state.selectedMode&&(t=null),r.setState({selectedMode:t})},r._onSelect=function(e){r.setState({selectedFeatureIndex:e&&e.selectedFeatureIndex})},r._onUpdate=function(e){r.setState({features:e,selectedMode:N.EditorModes.READ_ONLY,selectedFeatureIndex:null})},r._onSaveRequest=function(e){if(e){var t=r.state.features.data[r.state.selectedFeatureIndex];console.log(t),r.setState({selectedMode:N.EditorModes.READ_ONLY,selectedFeatureIndex:null}),t?S.b.info("New precinct is saved",{position:S.b.POSITION.BOTTOM_RIGHT}):S.b.info("Please select a new created precint to save",{position:S.b.POSITION.BOTTOM_RIGHT})}},r._renderToolbar=function(){return"Edit"===r.state.userMode?n.a.createElement(ve,{selectedMode:r.state.selectedMode,onSwitchMode:r._switchMode,onDelete:r._onDelete,onSelect:r._onSelect,features:r.state.features,selectedFeature:r.state.selectedFeature,toolBarRequest:r._onSaveRequest,appData:r.appData}):void 0},r._onClick=function(e){var t=e.features;if(t){var a=t.find((function(e){return"stateFill"===e.layer.id})),n=t.find((function(e){return"countyFill"===e.layer.id})),i=t.find((function(e){return"congressionalFill"===e.layer.id})),o=t.find((function(e){return"precinctFill"===e.layer.id})),c=a||n||i||o,s=r.state.selectedFeature;if(a){if(a.properties.type="State",r.state.selectedFeature){if(a.properties.name===r.state.selectedFeature.properties.name)return void r._zoomToFeature(e)}else S.b.info("Click the same feature (state/county) again to zoom in.",{position:S.b.POSITION.BOTTOM_RIGHT});r.onStateSelected(a)}else if(n){if(n.properties.type="County",r.state.selectedFeature&&n.properties.name===r.state.selectedFeature.properties.name)return void r._zoomToFeature(e);r.onCountySelected(n)}else if(i)i.properties.type="Congressional District",r.setState({selectedFeature:i});else{if(o)return o.properties.type="Precinct",void r.onPrecinctSelected(o,e.srcEvent.shiftKey);s&&"Precinct"===s.properties.type&&r.removeHighlightPrecinctNeighbors(s),r.setState({selectedFeature:null})}r.removeSelectedHighlight(s),r.addSelectedHighlight(c)}},r._onHover=function(e){var t=r.mapRef.current.getMap(),a=e.features,n=e.srcEvent,i=n.x,o=n.y;if(!e.type||!e.features||0===e.features.length||"composite"===e.features[0].source){var c=r.state.hoveredFeature;return c&&c.id&&t.setFeatureState({source:c.source,id:c.id},{hover:!1}),void r.setState({hoveredFeature:null})}if(0!==i&&0!==o&&r.setState({x:i,y:o}),a){var s=a.find((function(e){return"stateFill"===e.layer.id})),l=a.find((function(e){return"countyFill"===e.layer.id})),u=a.find((function(e){return"congressionalFill"===e.layer.id})),d=a.find((function(e){return"precinctFill"===e.layer.id})),p=s||l||u||d,h=r.state.hoveredFeature;p&&t.setFeatureState({source:p.source,id:p.id},{hover:!0}),s?p.isState=!0:l?p.isCounty=!0:u?p.isCongressional=!0:d&&(p.isPrecinct=!0,r.onPrecinctHover(d,e)),h&&p&&p.id&&h.id!=p.id&&t.setFeatureState({source:h.source,id:h.id},{hover:!1}),r.setState({hoveredFeature:p})}},r.userModeSelect=function(e){e&&r.setState({userMode:e}),"Edit"!==e?r.setState({precinct_selection_to_edit:!1,precinct_selected_for_edit:null}):r.setState({precinct_selection_to_edit:!0})},r._onClickError=function(e){r.setState({popupInfo:e}),console.log(e),r.setState({viewport:Object(d.a)({},r.state.viewport,{longitude:e.longitude,latitude:e.latitude,transitionDuration:1e3,zoom:11})})},r.errorListOnClick=function(e){console.log(e);var t=e.precinctId;if(t){t.slice(0,2),t.slice(0,5);var a=r.getMap();r.appData.fetchPrecinctShape(t).then((function(e){var t=e.features[0].geometry;console.log(t);var r=t.coordinates[0][0][0],n=a.queryRenderedFeatures(r,{layers:"PrecinctFill"});console.log(e),console.log(n)}))}},r.addPrecinctNeighbor=function(){console.log("add precinct neighbors call made");var e=r.state.selectedPrecinctGroup;if(2===e.length){var t=e.pop(),a=e.pop();r.appData.addPrecinctNeighbor(t.id,a.id).then((function(e){console.log("add neighbors call made"),console.log(e);var n=r.fetchAndUpdatePrecinct(t),i=r.fetchAndUpdatePrecinct(a);return n&&i}))?S.b.success("Precincts added as neighbors",{position:S.b.POSITION.BOTTOM_CENTER}):S.b.error("Could not add neighborship",{position:S.b.POSITION.BOTTOM_CENTER}),r.removeSelectedHighlight(t),r.removeHighlightPrecinctNeighbors(t),r.highlightPrecinctNeighbors(a)}},r.removePrecinctNeighbor=function(){r.state.selectedPrecinctGroup},r.mergePrecincts=function(){var e=r.state.selectedPrecinctGroup;if(2===e.length){var t=e.pop(),a=e.pop();r.appData.mergePrecinct(t,a)?S.b.success("Precincts merged",{position:S.b.POSITION.BOTTOM_CENTER}):S.b.error("Could not merge",{position:S.b.POSITION.BOTTOM_CENTER}),r.removeSelectedHighlight(t),r.removeSelectedHighlight(a)}},r.toggleLayer=function(e,t){t.stopPropagation();var a=r.state.layers;switch(e){case"States":a.states=!a.states;break;case"Counties":a.counties=!a.counties;break;case"Congressional Districts":a.congressional=!a.congressional;break;case"Precincts":a.precincts=!a.precincts;break;case"National Parks":a.parks=!a.parks}r.setState({layers:a})},r.stopPropogation=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},r._renderCheckboxes=function(){return n.a.createElement("div",null,n.a.createElement(_.a,{border:"secondary",style:{width:"10rem",backgroundColor:"rgba(255,255,255,0.9)"},onMouseOver:function(e){return r.stopPropogation(e)}},n.a.createElement(_.a.Header,null,"Layers"),n.a.createElement(_.a.Body,null,n.a.createElement(y.a,null,["States","Congressional Districts","Counties","Precincts","National Parks"].map((function(e){return n.a.createElement("div",{key:"checkbox-".concat(e)},n.a.createElement(y.a.Check,{label:e,type:"checkbox",defaultChecked:"Congressional Districts"!=e&&"National Parks"!=e,onClick:function(t){return r.toggleLayer(e,t)}}))})))),n.a.createElement(_.a.Footer,{style:{lineHeight:"1.0"}},n.a.createElement("small",{className:"text-muted"},"Note: some layers will only show at certain zoom levels"))))},r.state={stateData:null,countyData:null,countyDataOutline:null,congressionalDistrictData:null,precinctData:null,viewport:{width:"100%",height:window.innerHeight,latitude:37.0902,longitude:-105.7129,zoom:3.3},popupInfo:null,selectedFeature:null,selectedPrecinctGroup:[],selectedMode:N.EditorModes.READ_ONLY,hoveredFeature:null,shouldShowPins:!1,features:{},selectedFeatureIndex:null,userMode:"View",layers:{states:!0,counties:!0,congressional:!1,precincts:!0,parks:!1},parksData:null},r._editorRef=null,r.showErrorPins=r.showErrorPins.bind(Object(v.a)(r)),r.appData=new P,r.mapRef=n.a.createRef(),r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"getMap",value:function(){return this.mapRef.current.getMap()}},{key:"onStateSelected",value:function(e){var t=this;console.log(e.properties);var r=e.properties.id;"Wisconsin"===e.properties.name?this.loadWisconsinParks():"New York"===e.properties.name?this.loadNyParks():"Utah"===e.properties.name&&this.loadUtahParks(),this.appData.fetchCongressionalDistrictByState(r).then((function(e){t.setState({congressionalDistrictData:e})})),this.appData.fetchCountiesByState(r).then((function(e){t.setState({countyData:e})})),this.setState({selectedFeature:e})}},{key:"onCountySelected",value:function(e){var t=this,r=e.properties.id;this.appData.fetchShapeOfPrecinctsByCounty(r).then((function(e){console.log(e),t.setState({precinctData:e})})),this.setState({selectedFeature:e})}},{key:"onPrecinctHover",value:function(e,t){var r=t.srcEvent.shiftKey,a=this.state.selectedFeature;r&&"Precinct"===a.type?e.multiSelecting=!0:e.multiSelecting=!1}},{key:"onPrecinctSelected",value:function(e,t){var r=this,a=e.properties.id,n=this.state.selectedFeature;this.appData.fetchPrecinctInfo(a).then((function(t){var r=e,a=[];for(var n in t.neighborsId)a.push(t.neighborsId[n].toString().trim());var i={demographicData:t.demographicData,fullName:t.fullName,id:t.id,isGhost:t.isGhost,parentId:t.parentDistrictId,precinctError:t.precinctErrors,votingData:t.votingData};void 0===r.properties.neighborsId&&(i=Object(d.a)({},i,{neighborsId:a}));var o=Object.assign(r.properties,i);return r.properties=o,r})).then((function(e){t?r.addPrecinctToGroup(e):(r.removeSelectedHighlight(n),r.removeHighlightPrecinctNeighbors(n),r.clearPrecinctGroup(),r.addSelectedHighlight(e),r.highlightPrecinctNeighbors(e),r.setState({selectedFeature:e}))}))}},{key:"addPrecinctToGroup",value:function(e){var t=this.state.selectedPrecinctGroup;if(0===t.length){var r=this.state.selectedFeature;t.push(r),t.push(e)}else{if(1!==t.length)return void S.b.warn("Can only add 2 precincts to a group",{position:S.b.POSITION.BOTTOM_CENTER});t.push(e)}console.log(t),this.addSelectedHighlight(e),this.setState({selectedPrecinctGroup:t})}},{key:"clearPrecinctGroup",value:function(){for(var e=this.state.selectedPrecinctGroup;0!=e.length;)this.removeSelectedHighlight(e.pop());this.setState({selectedPrecinctGroup:e})}},{key:"_zoomToFeature",value:function(e){var t=e.features[0];if(t)if("stateFill"!==t.layer.id&&"countyFill"!==t.layer.id);else{var r=k()(t),a=Object(u.a)(r,4),n=a[0],i=a[1],o=a[2],c=a[3],s=new E.WebMercatorViewport(this.state.viewport).fitBounds([[n,i],[o,c]],{padding:40}),l=s.longitude,p=s.latitude,h=s.zoom;this.setState({viewport:Object(d.a)({},this.state.viewport,{longitude:l,latitude:p,zoom:h,transitionInterpolator:new E.LinearInterpolator({around:[e.offsetCenter.x,e.offsetCenter.y]}),transitionDuration:1e3})})}}},{key:"addHoveredHighlight",value:function(e){var t=this.mapRef.current.getMap();e&&e.id&&e.source&&t.setFeatureState({source:e.source,id:e.id},{hover:!0})}},{key:"addSelectedHighlight",value:function(e){var t=this.mapRef.current.getMap();e&&e.id&&e.source&&t.setFeatureState({source:e.source,id:e.id},{selected:!0})}},{key:"removeSelectedHighlight",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.mapRef.current.getMap(),t&&t.id&&t.source&&r.setFeatureState({source:t.source,id:t.id},{selected:!1});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"highlightPrecinctNeighbors",value:function(e){console.log(e);var t=this.mapRef.current.getMap(),r=e.properties.neighborsId||!1,a=e.source;if(r&&a)for(var n in r){var i=r[n].toString().trim();t.setFeatureState({source:a,id:i},{neighbor:!0})}}},{key:"removeHighlightPrecinctNeighbors",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),t&&(r=this.mapRef.current.getMap(),a=t.properties.neighborsId||!1,n=t.source,console.log("removeNeighbors",a),a&&n))for(i in a)o=a[i].toString().trim(),r.setFeatureState({source:n,id:o},{neighbor:!1});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_renderTooltip",value:function(){var e=this.state,t=e.hoveredFeature,r=e.x,a=e.y,i=e.selectedFeature;if(t){if(t.isState){var o=t;return t&&n.a.createElement("div",{className:"state-tooltip",style:{left:r,top:a}},n.a.createElement("h5",null,o.properties.name))}if(t.isCounty){var c=t;return c&&n.a.createElement("div",{className:"state-tooltip",style:{left:r,top:a}},n.a.createElement("h5",null,c.properties.name))}if(t.isCongressional){var s=t;return s&&n.a.createElement("div",{className:"state-tooltip",style:{left:r,top:a}},n.a.createElement("h5",null,s.properties.name),n.a.createElement("div",null),n.a.createElement("div",{style:{fontStyle:"italic"}},"click to load precincts for county"))}if(t.isPrecinct){var l=t;return l&&n.a.createElement("div",{className:"state-tooltip",style:{left:r,top:a}},n.a.createElement("h6",null,"Precinct id: ",l.properties.id),function(){if(i){if(l.id===i.id)return n.a.createElement("div",{style:{fontStyle:"italic"}},"this precicnt is currently selected");if(l.multiSelecting)return n.a.createElement("div",{style:{fontStyle:"italic"}},"add this to group?");if("Precinct"===i.properties.type)return n.a.createElement("div",{style:{fontStyle:"italic"}},"shift+click to add to selection")}}())}}}},{key:"stateSelect",value:function(e){var t=0,r=0;switch(e){case"New York":case"NY":t=43.2994,r=-76.2179;break;case"Wisconsin":case"WI":t=44.7844,r=-89.7879;break;case"Utah":case"UT":t=39.321,r=-112.0937}this.setState({viewport:Object(d.a)({},this.state.viewport,{latitude:t,longitude:r,zoom:6})})}},{key:"_renderErrorPopup",value:function(){var e=this,t=this.state.popupInfo;return t&&n.a.createElement(E.Popup,{tipSize:5,anchor:"top",longitude:t.longitude,latitude:t.latitude,closeOnClick:!1,onClose:function(){return e.setState({popupInfo:null})}},n.a.createElement(H,{info:t}))}},{key:"showErrorPins",value:function(){this.state.shouldShowPins?this.setState({shouldShowPins:!1}):this.setState({shouldShowPins:!0})}},{key:"getAllErrors",value:function(){var e=this;this.appData.fetchAllPrecinctError().then((function(t){console.log(t);var r={};for(var a in t){var n=t[a].precinctId;n&&(r[n]=t[a])}e.setState({allErrors:t})}))}},{key:"componentDidMount",value:function(){var e=this;this.appData.fetchAllStates().then((function(t){console.log(t.featureCollection),e.setState({stateData:t.featureCollection})})),this.getAllErrors()}},{key:"renderStateLayers",value:function(){var e=this.state,t=e.layers,r=e.stateData;return n.a.createElement(n.a.Fragment,null,t.states&&n.a.createElement(E.Source,{type:"geojson",data:r},n.a.createElement(E.Layer,Object.assign({},j,{maxzoom:5.5})),n.a.createElement(E.Layer,Object.assign({},T,{maxzoom:5.5}))))}},{key:"renderNationalParks",value:function(){var e=this.state,t=e.layers,r=e.parksData;return n.a.createElement(n.a.Fragment,null,t.parks&&n.a.createElement(n.a.Fragment,null,n.a.createElement(E.Source,{type:"geojson",data:r},n.a.createElement(E.Layer,B),n.a.createElement(E.Layer,M))))}},{key:"renderCongressionalLayers",value:function(){var e=this.state,t=e.layers,r=e.congressionalDistrictData;return n.a.createElement(n.a.Fragment,null,t.congressional&&n.a.createElement(E.Source,{type:"geojson",data:r},n.a.createElement(E.Layer,Object.assign({},x,{minzoom:5})),n.a.createElement(E.Layer,Object.assign({},A,{minzoom:5}))))}},{key:"renderCountyLayers",value:function(){var e=this.state,t=e.layers,r=e.countyData,a=e.selectedFeature;return n.a.createElement(n.a.Fragment,null,t.counties&&n.a.createElement(E.Source,{type:"geojson",data:r},n.a.createElement(E.Layer,Object.assign({},w,{minzoom:5.5})),n.a.createElement(E.Layer,Object.assign({},D,{minzoom:5.5,maxzoom:a&&"Precinct"===a.properties.type?7.5:9}))))}},{key:"renderPrecinctLayers",value:function(){var e=this.state,t=e.layers,r=e.precinctData;return n.a.createElement(n.a.Fragment,null,t.precincts&&n.a.createElement(E.Source,{type:"geojson",data:r},n.a.createElement(E.Layer,Object.assign({},R,{minzoom:7})),n.a.createElement(E.Layer,Object.assign({},F,{minzoom:7}))))}},{key:"precinctIsSelected",value:function(){var e=this.state.selectedFeature;return!(!e||!e.properties.type||"Precinct"!==e.properties.type)}},{key:"render",value:function(){var e=this,t=this.state,r=t.viewport,a=t.selectedMode,i=t.shouldShowPins;return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"selectStateItem inlineDivs"},n.a.createElement(U,{select_state:function(t){return e.stateSelect.bind(e,t)}})),this.precinctIsSelected()&&n.a.createElement("div",{className:"precinctBtns"},n.a.createElement("div",{className:"mergeBtn inlineDivs"},n.a.createElement(ge,{mergePrecincts:function(){return e.mergePrecincts()},enabled:this.state.selectedPrecinctGroup.length>=2})),n.a.createElement("div",{className:"addRemBtn inlineDivs"},n.a.createElement(Ee,{addPrecinctNeighbor:function(){return e.addPrecinctNeighbor()},removePrecinctNeighbor:function(){return e.removePrecinctNeighbor()},enabled:this.state.selectedPrecinctGroup.length>=2}))),n.a.createElement("div",null,n.a.createElement("div",{id:"leftCol"},n.a.createElement(re,{selected:this.state.selectedFeature,showErrorPins:this.showErrorPins.bind(this),userMode:this.state.userMode,leftSideBarStatus:this.get_leftSideBar_status,precinctSelectedForEdit:this.state.precinct_selected_for_edit,appData:this.appData,allErrors:this.state.allErrors,errorListOnClick:this.errorListOnClick})),n.a.createElement(E.default,Object.assign({},r,{onViewportChange:function(t){return e.setState({viewport:t})},mapStyle:"mapbox://styles/shortland/ck7fn4gmu014c1ip60jlumnm2",mapboxApiAccessToken:Ne,onHover:this._onHover,onClick:this._onClick,doubleClickZoom:!1,ref:this.mapRef}),n.a.createElement("div",{id:"map-checkboxes",style:{position:"absolute",textAlign:"left",fontSize:"10pt",top:"10%",right:"10px"}},this._renderCheckboxes()),n.a.createElement(N.Editor,{ref:function(t){return e._editorRef=t},clickRadius:12,onSelect:function(t){return e._onSelect(t)},onUpdate:function(t){return e._onUpdate(t)},mode:a}),n.a.createElement(I.a,{mapRef:this.mapRef,onResult:this.handleOnResult,onViewportChange:this.handleGeocoderViewportChange,mapboxApiAccessToken:Ne,position:"top-right"}),n.a.createElement("div",{className:"FullScreenController MapControllers"},n.a.createElement(E.FullscreenControl,null)),n.a.createElement("div",{className:"NavigationController MapControllers"},n.a.createElement(E.NavigationControl,null)),n.a.createElement("div",{className:"ScaleController MapControllers"},n.a.createElement(E.ScaleControl,null)),this.renderStateLayers(),this.renderNationalParks(),this.renderCountyLayers(),this.renderCongressionalLayers(),this.renderPrecinctLayers(),this._renderTooltip(),this._renderToolbar(),n.a.createElement(L,{data:ye,onClick:this._onClickError,shouldShowPins:i,appData:this.appData,mapRef:this.mapRef}),this._renderErrorPopup())),n.a.createElement(S.a,null))}},{key:"fetchAndUpdatePrecinct",value:function(e){var t=this;console.log("fetch and update called"),console.log(e);var r=e.properties.id;this.appData.fetchPrecinctInfo(r).then((function(t){var r=e,a=[];for(var n in t.neighborsId)a.push(t.neighborsId[n].toString().trim());var i={demographicData:t.demographicData,fullName:t.fullName,id:t.id,isGhost:t.isGhost,parentId:t.parentDistrictId,precinctError:t.precinctErrors,votingData:t.votingData};void 0===r.properties.neighborsId&&(i=Object(d.a)({},i,{neighborsId:a}));var o=Object.assign(r.properties,i);return r.properties=o,r})).then((function(e){return console.log(e),t.forceUpdate(),e}))}},{key:"loadNyParks",value:function(){var e=this;Object(b.a)(Oe.a,(function(t,r){t||e.setState({parksData:r})}))}},{key:"loadUtahParks",value:function(){var e=this;Object(b.a)(Ie.a,(function(t,r){t||e.setState({parksData:r})}))}},{key:"loadWisconsinParks",value:function(){var e=this;Object(b.a)(Se.a,(function(t,r){t||e.setState({parksData:r})}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(Pe,null),document.getElementById("map")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[195,1,2]]]);
//# sourceMappingURL=main.e90da631.chunk.js.map