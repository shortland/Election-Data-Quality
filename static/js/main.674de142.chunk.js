(this["webpackJsonp416-app"]=this["webpackJsonp416-app"]||[]).push([[0],{134:function(e,t){},177:function(e){e.exports=JSON.parse('[{"type":"self intersecting border","from":"preprocessing","latitude":40.6643,"longitude":-79.9385},{"type":"open borders","from":"preprocessing","latitude":43.633461,"longitude":-76.797859},{"type":"gaps precinct coverage","from":"preprocessing","latitude":40.6071584,"longitude":-74.0881154},{"type":"precinct multi polygon","from":"preprocessing","latitude":42.1936482,"longitude":-74.135364},{"type":"overlapping precincts","from":"preprocessing","latitude":33.5722,"longitude":-112.088}]')},190:function(e,t,r){e.exports=r(329)},195:function(e,t,r){},310:function(e,t,r){},311:function(e,t,r){},312:function(e,t,r){},313:function(e,t,r){},324:function(e,t){},329:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(40),o=r.n(i),c=(r(195),r(10)),s=r.n(c),l=r(17),u=r(13),d=r(87),p=r(4),h=r(3),m=r(7),f=r(5),v=r(6),g=r(8),E=r(23),y=r(69),b=r(131),O=r.n(b),S=r(27),k=r(341),_=r(164),C=r(49),I=function(){function e(){Object(p.a)(this,e),this.asyncFetch=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.allStates=null,this.baseUrl="https://ElectionDataQuality.com:1234/"}return Object(h.a)(e,[{key:"fetchAllStates",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,r,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"allStates");case 2:if("ok"==(t=e.sent).status){e.next=6;break}return alert("server error: unable to get data"),e.abrupt("return");case 6:for(n in r={type:"FeatureCollection",features:[]},t.content)a={type:"Feature",properties:{name:t.content[n].name,id:t.content[n].id,congressional_districts:t.content[n].congressionalDistrictIds},id:t.content[n].id,geometry:t.content[n].geometry},r.features.push(a);return e.abrupt("return",{featureCollection:r});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCongressionalDistrictByState",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r,n,a,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"congressionalDistrictsForState?stateId=".concat(t));case 2:if("ok"==(r=e.sent).status){e.next=6;break}return alert("server error: unable to get data"),e.abrupt("return");case 6:for(n=r.content.features,a=0;a<n.length;a++)i=n[a],o={id:i.id,name:i.name,parentId:i.parentId,childrenId:i.childrenId},delete i.name,delete i.parentId,delete i.childrenId,i.properties=o;return r.content.features=n,e.abrupt("return",r.content);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAllCongressionalDistricts",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"allCongressionalDistricts");case 2:if("ok"==(t=e.sent).status){e.next=6;break}return alert("server error: unable to get data"),e.abrupt("return");case 6:return e.abrupt("return",t.content);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCountiesByState",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r,n,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"countiesInState?stateId=".concat(t));case 2:if("ok"==(r=e.sent).status){e.next=6;break}return alert("server error: unable to get data"),e.abrupt("return");case 6:for(a in n={type:"FeatureCollection",features:[]},r.content)i={type:"Feature",properties:{name:r.content[a].name,id:r.content[a].countyId},id:r.content[a].countyId,geometry:r.content[a].geometry},n.features.push(i);return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchShapeOfPrecinctsByCounty",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r,n,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"shapeOfPrecinctByCounty?countyId=".concat(t));case 2:if("ok"==(r=e.sent).status){e.next=7;break}return console.log(r),alert("server error: unable to get precinct shapes"),e.abrupt("return");case 7:for(a in n={type:"FeatureCollection",features:[]},r.content)i={type:"Feature",properties:{id:r.content[a].id},geometry:r.content[a].geometry,id:r.content[a].id},n.features.push(i);return console.log(n),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPrecinctShape",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"shapeOfPrecinct?precinctId=".concat(t));case 2:if("ok"==(r=e.sent).status){e.next=7;break}return console.log(r),alert("server error: unable to get precinct shapes"),e.abrupt("return");case 7:return n={type:"FeatureCollection",features:[]},a={type:"Feature",properties:{id:r.content.id},geometry:r.content.geometry,id:r.content.id},n.features.push(a),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPrecinctInfo",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"precinctInfo?precinctId=".concat(t));case 2:if("ok"==(r=e.sent).status){e.next=7;break}return console.log(r),alert("server error : unable to get precinct info"),e.abrupt("return");case 7:return e.abrupt("return",r.content);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addPrecinctNeighbor",value:function(){var e=Object(l.a)(s.a.mark((function e(t,r){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"addPrecinctNeighbor?precinctId1=".concat(t)+"&precinctId2=".concat(r));case 2:if("ok"==(n=e.sent).status){e.next=7;break}return console.log(n),alert("server error : unable to add"+t+" and "+r+" as neighbor"),e.abrupt("return");case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deletePrecinctNeighbor",value:function(){var e=Object(l.a)(s.a.mark((function e(t,r){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"deletePrecinctNeighbor?precinctId1=".concat(t)+"&precinctId2=".concat(r));case 2:if("ok"==(n=e.sent).status){e.next=7;break}return console.log(n),alert("server error : unable to delete"+t+" and "+r+" as neighbor"),e.abrupt("return");case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"mergePrecinct",value:function(){var e=Object(l.a)(s.a.mark((function e(t,r){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"mergePrecinct?precinctId1=".concat(t)+"&precinctId2=".concat(r));case 2:if("ok"==(n=e.sent).status){e.next=7;break}return console.log(n),alert("server error : unable to merge"+t+" and "+r),e.abrupt("return");case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchAllPrecinctError",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"getAllError");case 2:if("ok"==(t=e.sent).status){e.next=7;break}return console.log(t),alert("server error : unable to get precinctErrors"),e.abrupt("return");case 7:return e.abrupt("return",t.content);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),P=(r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(68)),N={id:"countyFill",type:"fill",paint:{"fill-color":"#0779e4","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.6,.3]}},w={id:"countyOutline",type:"line",paint:{"line-color":"#000000","line-width":2,"line-opacity":.4},layout:{"line-join":"round"}},D={id:"stateFill",type:"fill",paint:{"fill-color":"#0779e4","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.75,.5]}},T={id:"stateOutline",type:"line",paint:{"line-color":"#000000","line-width":2,"line-opacity":.4},layout:{"line-join":"round"}},j={id:"precinctFill",type:"fill",paint:{"fill-color":["case",["boolean",["feature-state","neighbor"],!1],"rgba(144, 12, 63, 0.9)",["boolean",["feature-state","selected"],!1],"rgba(144, 12, 63, 1.0)","rgba(144, 12, 63, 0.8)"],"fill-opacity":["case",["boolean",["feature-state","selected"],!1],.9,["boolean",["feature-state","hover"],!1],.8,["boolean",["feature-state","neighbor"],!1],.6,.4]}},R={id:"precinctOutline",type:"line",paint:{"line-color":"#000000","line-opacity":.5,"line-width":2},layout:{"line-join":"round"}},F={id:"congressionalFill",type:"fill",paint:{"fill-color":"#27496d","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.6,.4]}},x={id:"congressionalOutline",type:"line",paint:{"line-color":"#FFFFFF","line-width":4,"line-opacity":.5},layout:{"line-join":"round"}},A=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,r=e.onClick,n=e.shouldShowPins;return console.log(n),n?(console.log("should show pins"),t.map((function(e,t){return a.a.createElement(E.Marker,{key:"marker-".concat(t),longitude:e.longitude,latitude:e.latitude},a.a.createElement("svg",{height:20,viewBox:"0 0 24 24",style:{cursor:"pointer",fill:"#d00",stroke:"none",transform:"translate(".concat(-10,"px,").concat(-20,"px)")},onClick:function(){return r(e)}},a.a.createElement("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"})))}))):a.a.createElement("span",null)}}]),t}(n.PureComponent),M=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.info;return a.a.createElement("div",null,a.a.createElement("h3",null,"Map Error"),a.a.createElement("br",null),a.a.createElement("p",{style:{textAlign:"left"}},"Type: ",e.type,a.a.createElement("br",null),"Source: ",e.from))}}]),t}(n.PureComponent),B=r(24),L=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.a.createElement(B.a,null,a.a.createElement(B.a.Toggle,{variant:"info",id:"dropdown-basic"},"Select State"),a.a.createElement(B.a.Menu,null,a.a.createElement(B.a.Item,{href:"#/NewYork",onClick:this.props.select_state("NY")},"New York"),a.a.createElement(B.a.Item,{href:"#/Utah",onClick:this.props.select_state("UT")},"Utah"),a.a.createElement(B.a.Item,{href:"#/Wisconsin",onClick:this.props.select_state("WI")},"Wisconsin")))}}]),t}(n.Component),H=r(61),G=r.n(H),z=r(120),U=r(26),V=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={votingData:e.votingData,election:2016,presidental:void 0,congressional:void 0},r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"getAllElection",value:function(){var e=this.state.votingData;if(void 0!==e){var t=Object.keys(e.electionData);return 0===t.length?void 0:t}}},{key:"getResults",value:function(e){var t=this.state.votingData;if(void 0!==t){var r=Object.keys(t.electionData),n=[];for(var a in r)r[a].includes(e.toString())&&n.push(r[a]);var i={},o=t.electionData;for(var c in n)i[n[c]]=o[n[c]].resultsByParty;return i}}},{key:"changeElection",value:function(e){var t=this.getResults(e),r=Object.keys(t);for(var n in this.setState({election:e,presidental:void 0,congressional:void 0}),r)r[n].includes("PRES")?this.setState({presidental:t[r[n]]}):r[n].includes("CONG")&&this.setState({congressional:t[r[n]]})}},{key:"yearButtons",value:function(e){if(e){var t=[];for(var r in e){var n=e[r].substring(4,9);t.includes(n)||t.push(n)}var i=[];for(var o in t)i.push(a.a.createElement(U.a,{variant:"outline-primary",id:"btn"+o.toString(),className:"button",onClick:this.changeElection.bind(this,parseInt(t[o]))},t[o]));return i}}},{key:"render",value:function(){var e=this.getAllElection();void 0!==e&&void 0===this.state.presidental&&void 0===this.state.congressional&&this.changeElection(e[0].substring(4,9));var t=this.state.presidental,r=this.state.congressional;return void 0!==t&&void 0!==r?a.a.createElement("div",null,a.a.createElement(z.a,{size:"sm",className:"mt-3"},this.yearButtons(e)),a.a.createElement("br",null),a.a.createElement("hr",null),"Presidential:",a.a.createElement("div",{className:"BarDisplay"},a.a.createElement("div",{className:"BlueBar Demographic",style:{width:t.DEMOCRAT+"%"}},"Democrat\n"+t.DEMOCRAT),a.a.createElement("div",{className:"RedBar Replublican",style:{width:t.REPUBLICAN+"%"}},"Republican\n"+t.REPUBLICAN),a.a.createElement("div",{className:"GreenBar Libratarian",style:{width:t.LIBRATARIAN+"%"}},"Libratarian\n"+t.LIBRATARIAN),a.a.createElement("div",{className:"YellowBar Other",style:{width:t.OTHER+"%"}},"Other\n"+t.OTHER)),a.a.createElement("br",null),a.a.createElement("hr",null),"Congressional:",a.a.createElement("div",{className:"BarDisplay"},a.a.createElement("div",{className:"BlueBar Demographic",style:{width:r.DEMOCRAT+"%"}},"Democrat\n"+r.DEMOCRAT),a.a.createElement("div",{className:"RedBar Replublican",style:{width:r.REPUBLICAN+"%"}},"Republican\n"+r.REPUBLICAN),a.a.createElement("div",{className:"GreenBar Libratarian",style:{width:r.LIBRATARIAN+"%"}},"Libratarian\n"+r.LIBRATARIAN),a.a.createElement("div",{className:"YellowBar Other",style:{width:r.OTHER+"%"}},"Other\n"+r.OTHER)),a.a.createElement("a",{className:"dataSource",href:"https://electionlab.mit.edu/data"},"source")):void 0!==t&&void 0===r?a.a.createElement("div",null,a.a.createElement(z.a,{size:"sm",className:"mt-3"},this.yearButtons(e)),a.a.createElement("br",null),a.a.createElement("hr",null),"Presidential:",a.a.createElement("div",{className:"BarDisplay"},a.a.createElement("div",{className:"BlueBar Demographic",style:{width:t.DEMOCRAT+"%"}},"Democrat\n"+t.DEMOCRAT),a.a.createElement("div",{className:"RedBar Replublican",style:{width:t.REPUBLICAN+"%"}},"Republican\n"+t.REPUBLICAN),a.a.createElement("div",{className:"GreenBar Libratarian",style:{width:t.LIBRATARIAN+"%"}},"Libratarian\n"+t.LIBRATARIAN),a.a.createElement("div",{className:"YellowBar Other",style:{width:t.OTHER+"%"}},"Other\n"+t.OTHER)),a.a.createElement("a",{className:"dataSource",href:"https://electionlab.mit.edu/data"},"source")):void 0===t&&void 0!==r?a.a.createElement("div",null,a.a.createElement(z.a,{size:"sm",className:"mt-3"},this.yearButtons(e)),a.a.createElement("br",null),a.a.createElement("hr",null),"Congressional:",a.a.createElement("div",{className:"BarDisplay"},a.a.createElement("div",{className:"BlueBar Demographic",style:{width:r.DEMOCRAT+"%"}},"Democrat\n"+r.DEMOCRAT),a.a.createElement("div",{className:"RedBar Replublican",style:{width:r.REPUBLICAN+"%"}},"Republican\n"+r.REPUBLICAN),a.a.createElement("div",{className:"GreenBar Libratarian",style:{width:r.LIBRATARIAN+"%"}},"Libratarian\n"+r.LIBRATARIAN),a.a.createElement("div",{className:"YellowBar Other",style:{width:r.OTHER+"%"}},"Other\n"+r.OTHER)),a.a.createElement("a",{className:"dataSource",href:"https://electionlab.mit.edu/data"},"source")):a.a.createElement("div",null,"No ElectionData")}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.votingData!==t.votingData?{votingData:e.votingData,presidental:void 0,congressional:void 0}:null}}]),t}(n.Component),Y=r(170),W=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(m.a)(this,Object(f.a)(t).call(this,e))).total=0,r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"calculateTotal",value:function(){if(this.props.demographicData){var e=0,t=this.props.demographicData.demographic;for(var r in t)e+=t[r];this.total=e}}},{key:"getPopulation",value:function(e){return this.props.demographicData?this.props.demographicData.demographic[e]:0}},{key:"getPercentage",value:function(e){if(this.props.demographicData){var t=this.props.demographicData.demographic;return 0===t[e]?0:t[e]/this.state.total*100}return 0}},{key:"render",value:function(){return this.calculateTotal(),a.a.createElement("div",null,a.a.createElement(Y.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Race"),a.a.createElement("th",null,"Num"))),a.a.createElement("tbody",{className:"text-left"},a.a.createElement("tr",null,a.a.createElement("th",null,"White"),a.a.createElement("td",null,this.getPopulation("WHITE"))),a.a.createElement("tr",null,a.a.createElement("th",null,"Black"),a.a.createElement("td",null,this.getPopulation("BLACK"))),a.a.createElement("tr",null,a.a.createElement("th",null,"Native_American"),a.a.createElement("td",null,this.getPopulation("NATIVE_AMERICAN"))),a.a.createElement("tr",null,a.a.createElement("th",null,"Asian"),a.a.createElement("td",null,this.getPopulation("ASIAN"))),a.a.createElement("tr",null,a.a.createElement("th",null,"Native_Hawaiian"),a.a.createElement("td",null,this.getPopulation("NATIVE_HAWAIIAN"))),a.a.createElement("tr",null,a.a.createElement("th",null,"Other"),a.a.createElement("td",null,this.getPopulation("OTHER")))),a.a.createElement("tfoot",null,a.a.createElement("tr",null,a.a.createElement("th",{colSpan:"1"},"Total Population"),a.a.createElement("td",null,this.total)))),a.a.createElement("a",{className:"dataSource",href:"https://electionlab.mit.edu/data"},"source"))}}]),t}(n.PureComponent),q=function(e){function t(e){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).call(this,e))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"save_changes",value:function(){this.dismiss()}},{key:"dismiss",value:function(){this.props.data_correction_page_status("done")}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"data_correction_page"},a.a.createElement("h4",null,"Data Correction Form"),a.a.createElement(y.a,null,a.a.createElement(y.a.Group,{controlId:"data_correction.target_data"},a.a.createElement(y.a.Label,null,"Data for correction"),a.a.createElement(y.a.Control,{as:"select"},a.a.createElement("option",null,"Demographic"),a.a.createElement("option",null,"Election"))),a.a.createElement(y.a.Group,{controlId:"data_correction.value"},a.a.createElement(y.a.Label,null,"Changed Value"),a.a.createElement(y.a.Control,{type:"value",placeholder:"Please enter corrected data"}))),a.a.createElement("div",{className:"data_correction_Btns"},a.a.createElement(U.a,{variant:"outline-primary",id:"data_change",onClick:function(){e.save_changes()}},"Change"),a.a.createElement(U.a,{variant:"outline-primary",id:"data_change_cancel",onClick:function(){e.dismiss()}},"Cancel")),a.a.createElement("br",null))}}]),t}(n.Component),J=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={mode:"default",dynamicAddNeighbor:!1},r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"getAllNeighbors",value:function(){var e=this.props.selectedFeature.properties.neighborsId,t=[];for(var r in e)t.push(a.a.createElement("li",null,e[r]));return t}},{key:"switchMode",value:function(e){this.setState({mode:e}),this.props.modify_neighbors_page_status(e)}},{key:"saveAction",value:function(){var e=this,t=this.state.mode,r=this.props.selectedFeature.id,n=this.props.precinctSelectedForEdit;"add"===t?(this.setState({mode:"default"}),n&&this.props.appData.addPrecinctNeighbor(r,n).then((function(t){console.log(t),e.dynamicAddNeighborId(n),e.forceUpdate()})),this.props.modify_neighbors_page_status("default")):(this.setState({mode:"default"}),n&&this.props.appData.deletePrecinctNeighbor(r,n).then((function(t){console.log(t),e.dynamicDeleteNeighborId(n),e.forceUpdate()})),this.props.modify_neighbors_page_status("default"))}},{key:"dynamicAddNeighborId",value:function(e){this.props.selectedFeature.properties.neighborsId.push(e.toString().trim())}},{key:"dynamicDeleteNeighborId",value:function(e){var t=this.props.selectedFeature.properties.neighborsId,r=[];for(var n in t)t[n].toString().trim()!==e.toString().trim()&&r.push(t[n]);this.props.selectedFeature.properties.neighborsId=r}},{key:"render",value:function(){var e=this,t=this.state.mode;return"default"===t?a.a.createElement("div",null,a.a.createElement("br",null),a.a.createElement(U.a,{id:"addButton",variant:"primary",onClick:function(t){e.switchMode("add")}},"Add Neighbor"),a.a.createElement("br",null),a.a.createElement(U.a,{id:"deleteButton",variant:"danger",onClick:function(t){e.switchMode("delete")}},"Delete Neighbor"),a.a.createElement("br",null),a.a.createElement("hr",null),a.a.createElement("h5",null,"Current Neighbors"),a.a.createElement("div",null,a.a.createElement("ul",null,this.getAllNeighbors())),a.a.createElement("br",null)):"add"===t?a.a.createElement("div",null,a.a.createElement("br",null),a.a.createElement("h5",null,"Add Nieghbors"),a.a.createElement("hr",null),a.a.createElement("p",null,"Please select precincts from the map to add as neighbor"),a.a.createElement("hr",null),a.a.createElement("span",null,"Current Selected Precincts"),a.a.createElement("ul",null,a.a.createElement("li",null,this.props.precinctSelectedForEdit)),a.a.createElement("hr",null),a.a.createElement(U.a,{id:"saveButton_add",variant:"success",onClick:function(t){e.saveAction()}},"Save Changes"),a.a.createElement("br",null)):"delete"===t?a.a.createElement("div",null,a.a.createElement("br",null),a.a.createElement("h5",null,"Delete Nieghbors"),a.a.createElement("hr",null),a.a.createElement("p",null,"Please select neighbors from the map to delete"),a.a.createElement("hr",null),a.a.createElement("span",null,"Current Selected Precincts"),a.a.createElement("ul",null,a.a.createElement("li",null,this.props.precinctSelectedForEdit)),a.a.createElement("hr",null),a.a.createElement(U.a,{id:"saveButton_del",variant:"success",onClick:function(t){e.saveAction()}},"Save Changes"),a.a.createElement("br",null)):void 0}}]),t}(n.Component),K=(n.Component,r(90)),Q=(n.Component,n.Component,r(70)),X=r(172),Z=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={selectedErrorType:"All"},r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"changeErrorType",value:function(e){this.setState({selectedErrorType:e})}},{key:"createErrorListByType",value:function(){var e=this,t=this.props.allErrors,r=[],n=this.state.selectedErrorType;if("All"===n){var i=function(n){r.push(a.a.createElement(Q.a.Item,{onClick:function(){return e.props.errorListOnClick(t[n])}}," ",t[n].errorType+" "+t[n].precinctId))};for(var o in t)i(o)}else if("NO_VOTER"===n){var c=function(n){"NO_VOTER"===t[n].errorType&&r.push(a.a.createElement(Q.a.Item,{onClick:function(){return e.props.errorListOnClick(t[n])}}," ",t[n].errorType+" "+t[n].precinctId))};for(var s in t)c(s)}else if("NO_DEMOGRAPIHIC"===n){var l=function(n){"NO_DEMOGRAPIHIC"===t[n].errorType&&r.push(a.a.createElement(Q.a.Item,{onClick:function(){return e.props.errorListOnClick(t[n])}}," ",t[n].errorType+" "+t[n].precinctId))};for(var u in t)l(u)}else if("GHOST"===n){var d=function(n){"GHOST"===t[n].errorType&&r.push(a.a.createElement(Q.a.Item,{onClick:function(){return e.props.errorListOnClick(t[n])}}," ",t[n].errorType+" "+t[n].precinctId))};for(var p in t)d(p)}else if("OVERLAP"===n){var h=function(n){"OVERLAP"===t[n].errorType&&r.push(a.a.createElement(Q.a.Item,{onClick:function(){return e.props.errorListOnClick(t[n])}}," ",t[n].errorType+" "+t[n].precinctId))};for(var m in t)h(m)}else if("INTERSECTING"===n){var f=function(n){"INTERSECTING"===t[n].errorType&&r.push(a.a.createElement(Q.a.Item,{onClick:function(){return e.props.errorListOnClick(t[n])}}," ",t[n].errorType+" "+t[n].precinctId))};for(var v in t)f(v)}return r}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,"Errors",a.a.createElement("hr",null),a.a.createElement(X.a,{title:this.state.selectedErrorType},a.a.createElement(B.a.Item,{as:"button",onClick:function(){return e.changeErrorType("All")}},"All"),a.a.createElement(B.a.Item,{as:"button",onClick:function(){return e.changeErrorType("NO_VOTER")}}," No voters"),a.a.createElement(B.a.Item,{as:"button",onClick:function(){return e.changeErrorType("NO_DEMOGRAPIHIC")}}," No demographic"),a.a.createElement(B.a.Item,{as:"button",onClick:function(){return e.changeErrorType("GHOST")}}," Ghost"),a.a.createElement(B.a.Item,{as:"button",onClick:function(){return e.changeErrorType("OVERLAP")}}," Overlap"),a.a.createElement(B.a.Item,{as:"button",onClick:function(){return e.changeErrorType("INTERSECTING")}}," Intersecting")),a.a.createElement(Q.a,null,this.createErrorListByType()),a.a.createElement("hr",null))}}]),t}(n.Component),$=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(m.a)(this,Object(f.a)(t).call(this,e))).createList=function(){var e=[],t=r.props.selected;if(t){var n=t.properties;for(var i in n)"demographicData"!==i&&"precinctError"!==i&&"votingData"!==i&&e.push(a.a.createElement("div",{className:"text-left"},"".concat(i,": ").concat(n[i])))}return e},r.get_data_correction_page_status=function(e){"done"===e&&r.setState({mode:"data_display"})},r.get_modify_neighbors_page_status=function(e){"default"!==e?r.props.leftSideBarStatus("precinct_selection_to_edit"):"default"===e?r.props.leftSideBarStatus("saveRequested"):r.props.leftSideBarStatus()},r.get_mapErrorList_onClick=function(e){r.props.errorListOnClick(e)},r.get_comments_modal_data=function(e){e&&r.setState({comment_data:e})},r._handleClick=function(e){r.props.showErrorPins()},r.state={mode:"data_display",comment_data:void 0},r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.userMode,t=(this.state.comment_data,this.createList()),r=this.props.selected?this.props.selected.properties.type:void 0,n=this.props.selected;if(t.length>0){if("View"===e)return a.a.createElement("div",{style:{textAlign:"left"}},a.a.createElement(G.a,{trigger:"General Info",open:!0},a.a.createElement("div",{style:{marginLeft:"5px"}},t)),a.a.createElement(G.a,{trigger:"Elections"},"Precinct"===n.properties.type&&a.a.createElement(V,{votingData:n.properties.votingData})||a.a.createElement("div",null,"select a precinct to view elections")),a.a.createElement(G.a,{trigger:"Demographics"},"Precinct"===n.properties.type&&a.a.createElement(W,{demographicData:n.properties.demographicData})||a.a.createElement("div",null,"select a precinct to view demographics")),a.a.createElement(G.a,{trigger:"Map Errors"},a.a.createElement(Z,{selectedFeature:this.props.selected,allErrors:this.props.allErrors,errorListOnClick:this.get_mapErrorList_onClick})));if("Edit"===e)return"Precinct"===r?a.a.createElement("div",null,a.a.createElement(G.a,{trigger:"General Info",open:!0},t),a.a.createElement(G.a,{trigger:"Modify Data"},a.a.createElement(q,{data_correction_page_status:this.get_data_correction_page_status})),a.a.createElement(G.a,{trigger:"Modify Neighbors"},a.a.createElement(J,{selectedFeature:n,modify_neighbors_page_status:this.get_modify_neighbors_page_status,precinctSelectedForEdit:this.props.precinctSelectedForEdit,appData:this.props.appData}))):a.a.createElement("div",null,a.a.createElement("h5",null),a.a.createElement(G.a,{trigger:"General Info",open:!0},t))}return a.a.createElement("div",null,"Click on a highlighted state to view details")}}]),t}(n.Component),ee=r(88),te=r(89);function re(){var e=Object(ee.a)(["\n  &:hover {\n    background: ",";\n  }\n  &:active: {\n    background: ",";\n  }\n"]);return re=function(){return e},e}function ne(){var e=Object(ee.a)(["\n  position: absolute;\n  left: 52px;\n  padding: 4px;\n  background: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  min-width: 100px;\n  max-width: 300px;\n  height: 24px;\n  font-size: 12px;\n  z-index: 9;\n  pointer-events: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return ne=function(){return e},e}function ae(){var e=Object(ee.a)(["\n  max-width: 20px !important;\n"]);return ae=function(){return e},e}function ie(){var e=Object(ee.a)(["\n  height: 34px;\n  width: 34px;\n  padding: 7px;\n  display: flex;\n  justify-content: left;\n  color: ",";\n  background: ",";\n"]);return ie=function(){return e},e}function oe(){var e=Object(ee.a)(["\n  position: absolute;\n//   width: 48px;\n  left: 260px;\n  top: 240px;\n  background: #fff;\n  box-shadow: 0 0 4px rgba(0, 0, 0, 0.15);\n  outline: none;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  padding: 0px;\n  margin: 0px;\n"]);return oe=function(){return e},e}var ce=[{id:C.EditorModes.SELECT,text:"Edit Feature",icon:"icon-select.svg"},{id:C.EditorModes.DRAW_POINT,text:"Draw Point",icon:"icon-point.svg"},{id:C.EditorModes.DRAW_PATH,text:"Draw Polyline",icon:"icon-path.svg"},{id:C.EditorModes.DRAW_POLYGON,text:"Draw Polygon",icon:"icon-polygon.svg"},{id:C.EditorModes.DRAW_RECTANGLE,text:"Draw Rectangle",icon:"icon-rectangle.svg"}],se=te.a.div(oe()),le=te.a.div(ie(),(function(e){return e.selected?"#ffffff":"inherit"}),(function(e){return e.selected?"#0071bc":e.hovered?"#e6e6e6":"inherit"})),ue=te.a.img(ae()),de=te.a.div(ne()),pe=Object(te.a)(le)(re(),(function(e){return e.selected?"#0071bc":"#e6e6e6"}),(function(e){return e.selected?"#0071bc":"inherit"})),he=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(m.a)(this,Object(f.a)(t).call(this,e)))._onHover=function(e){r.setState({hoveredId:e&&e.target.id})},r._onDelete=function(){r.props.onDelete(),r.setState({deleting:!0}),setTimeout((function(){return r.setState({deleting:!1})}),500)},r._onSaveChange=function(){console.log(r.props.features),r.props.toolBarRequest(r.props.features.data)},r.state={deleting:!1,hoveredId:null},r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.selectedMode,r=this.state.hoveredId;return a.a.createElement(se,null,ce.map((function(n){return a.a.createElement(le,{onClick:e.props.onSwitchMode,onMouseOver:e._onHover,onMouseOut:function(t){return e._onHover(null)},selected:n.id===t,hovered:n.id===r,key:n.id,id:n.id},a.a.createElement(ue,{id:n.id,onMouseOver:e._onHover,src:n.icon}),r===n.id&&a.a.createElement(de,null,n.text))})),a.a.createElement(pe,{selected:this.state.deleting,onClick:this._onDelete,onMouseOver:this._onHover,onMouseOut:function(t){return e._onHover(null)}},a.a.createElement(ue,{id:"delete",onMouseOver:this._onHover,src:"icon-delete.svg"}),"delete"===r&&a.a.createElement(de,null,"Delete")),a.a.createElement(le,{onClick:function(){return e._onSaveChange()},onMouseOver:this._onHover,onMouseOut:function(t){return e._onHover(null)},id:"saveDrawBtn"},a.a.createElement("span",{style:{fontSize:"10px"}}," save")))}}]),t}(n.PureComponent),me=function(e){function t(e){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).call(this,e))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.selectedFeature?this.props.selectedFeature.properties.type:void 0;return a.a.createElement(B.a,null,a.a.createElement(B.a.Toggle,{variant:"info",id:"userModeSelect"},"Select Mode"),a.a.createElement(B.a.Menu,null,a.a.createElement(B.a.Item,{onClick:function(){return e.props.userModeSelect("View")}},"View"),a.a.createElement(B.a.Item,{onClick:function(){e.props.userModeSelect("Edit"),"Precinct"!=t&&void 0!=t&&S.b.info("Note: Can only edit precinct",{position:S.b.POSITION.BOTTOM_RIGHT})},disabled:"Precinct"!==t},"Edit")))}}]),t}(n.Component),fe=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.props.enabled?a.a.createElement(U.a,{variant:"success",onClick:this.props.mergePrecincts},"Merge"):a.a.createElement(U.a,{variant:"success",disabled:!0},"Merge")}}]),t}(n.Component),ve=r(177),ge="pk.eyJ1Ijoic2hvcnRsYW5kIiwiYSI6ImNqeXVzOWhsbjBpYzczY29hNGZycTlqdXAifQ.B6l-uEqGG-Pw6-quz4eflQ",Ee=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleViewportChange=function(e){r.setState({viewport:Object(d.a)({},r.state.viewport,{},e)})},r.handleGeocoderViewportChange=function(e){return r.handleViewportChange(Object(d.a)({},e,{},{transitionDuration:1e3}))},r.handleOnResult=function(e){console.log(e.result),r.setState({searchResultLayer:new k.a({id:"search-result",data:e.result.geometry,getFillColor:[255,0,0,128],getRadius:1e3,pointRadiusMinPixels:10,pointRadiusMaxPixels:10})})},r._onDelete=function(){var e=r.state.selectedFeatureIndex;if(null!==e&&void 0!==e){S.b.info("Selected precinct is deleted",{position:S.b.POSITION.BOTTOM_RIGHT});var t=r.state.features;e>-1&&t.data.splice(e,1),r.setState({selectedFeatureIndex:null,selectedMode:C.EditorModes.READ_ONLY,features:t}),r._editorRef.deleteFeatures(e)}else S.b.info("Please select a new created precint before deleting action",{position:S.b.POSITION.BOTTOM_RIGHT})},r._switchMode=function(e){var t=e.target.id;t===r.state.selectedMode&&(t=null),r.setState({selectedMode:t})},r._onSelect=function(e){r.setState({selectedFeatureIndex:e&&e.selectedFeatureIndex})},r._onUpdate=function(e){r.setState({features:e,selectedMode:C.EditorModes.READ_ONLY,selectedFeatureIndex:null})},r._onSaveRequest=function(e){if(e){var t=r.state.features.data[r.state.selectedFeatureIndex];console.log(t),r.setState({selectedMode:C.EditorModes.READ_ONLY,selectedFeatureIndex:null}),t?S.b.info("New precinct is saved",{position:S.b.POSITION.BOTTOM_RIGHT}):S.b.info("Please select a new created precint to save",{position:S.b.POSITION.BOTTOM_RIGHT})}},r._renderToolbar=function(){return"Edit"===r.state.userMode?a.a.createElement(he,{selectedMode:r.state.selectedMode,onSwitchMode:r._switchMode,onDelete:r._onDelete,onSelect:r._onSelect,features:r.state.features,selectedFeature:r.state.selectedFeature,toolBarRequest:r._onSaveRequest,appData:r.appData}):void 0},r._onClick=function(e){var t=e.features;if(console.log(t),t){var n=t.find((function(e){return"stateFill"===e.layer.id})),a=t.find((function(e){return"countyFill"===e.layer.id})),i=t.find((function(e){return"congressionalFill"===e.layer.id})),o=t.find((function(e){return"precinctFill"===e.layer.id})),c=n||a||i||o,s=r.state.selectedFeature;if(n){if(n.properties.type="State",r.state.selectedFeature){if(n.properties.name===r.state.selectedFeature.properties.name)return void r._zoomToFeature(e)}else S.b.info("Click the same feature (state/county) again to zoom in.",{position:S.b.POSITION.BOTTOM_RIGHT});r.onStateSelected(n)}else if(a){if(a.properties.type="County",r.state.selectedFeature&&a.properties.name===r.state.selectedFeature.properties.name)return void r._zoomToFeature(e);r.onCountySelected(a)}else if(i)i.properties.type="Congressional District",r.setState({selectedFeature:i});else{if(o)return o.properties.type="Precinct",void r.onPrecinctSelected(o,e.srcEvent.shiftKey);s&&"Precinct"===s.properties.type&&r.removeHighlightPrecinctNeighbors(s)}r.removeSelectedHighlight(s),r.addSelectedHighlight(c)}},r._onHover=function(e){var t=r.mapRef.current.getMap(),n=e.features,a=e.srcEvent,i=a.x,o=a.y;if(!e.type||!e.features||0===e.features.length||"composite"===e.features[0].source){var c=r.state.hoveredFeature;return c&&c.id&&t.setFeatureState({source:c.source,id:c.id},{hover:!1}),void r.setState({hoveredFeature:null})}if(0!==i&&0!==o&&r.setState({x:i,y:o}),n){var s=n.find((function(e){return"stateFill"===e.layer.id})),l=n.find((function(e){return"countyFill"===e.layer.id})),u=n.find((function(e){return"congressionalFill"===e.layer.id})),d=n.find((function(e){return"precinctFill"===e.layer.id})),p=s||l||u||d,h=r.state.hoveredFeature;p&&t.setFeatureState({source:p.source,id:p.id},{hover:!0}),s?p.isState=!0:l?p.isCounty=!0:u?p.isCongressional=!0:d&&(p.isPrecinct=!0,r.onPrecinctHover(d,e)),h&&p&&p.id&&h.id!=p.id&&t.setFeatureState({source:h.source,id:h.id},{hover:!1}),r.setState({hoveredFeature:p})}},r.userModeSelect=function(e){e&&r.setState({userMode:e}),"Edit"!==e?r.setState({precinct_selection_to_edit:!1,precinct_selected_for_edit:null}):r.setState({precinct_selection_to_edit:!0})},r._onClickError=function(e){r.setState({popupInfo:e}),console.log(e),r.setState({viewport:Object(d.a)({},r.state.viewport,{longitude:e.longitude,latitude:e.latitude,transitionDuration:1e3,zoom:11})})},r.errorListOnClick=function(e){console.log(e);var t=e.precinctId;if(t){t.slice(0,2),t.slice(0,5);var n=r.getMap();r.appData.fetchPrecinctShape(t).then((function(e){var t=e.features[0].geometry;console.log(t);var r=t.coordinates[0][0][0],a=n.queryRenderedFeatures(r,{layers:"PrecinctFill"});console.log(e),console.log(a)}))}},r.get_leftSideBar_status=function(e){if("precinct_selection_to_edit"===e)r.setState({precinct_selection_to_edit:!0});else if("saveRequested"===e){r.setState({precinct_selection_to_edit:!1});var t=r.state.selectedFeature;if("Precinct"===t.properties.type){console.log("precinct_selection_to_edit : ",r.state.precinct_selection_to_edit),console.log(t),r.onPrecinctSelected(t,!1,!1)}else r.setState({precinct_selected_for_edit:null})}else r.setState({precinct_selected_for_edit:null,precinct_selection_to_edit:!1})},r.mergePrecincts=function(){var e=r.state.selectedPrecinctGroup;if(2===e.length){var t=e.pop(),n=e.pop();r.appData.mergePrecinct(t,n)?S.b.success("Precincts merged",{position:S.b.POSITION.BOTTOM_CENTER}):S.b.error("Could not merge",{position:S.b.POSITION.BOTTOM_CENTER}),r.removeSelectedHighlight(t),r.removeSelectedHighlight(n)}},r.toggleLayer=function(e,t){t.stopPropagation();var n=r.state.layers;switch(e){case"States":n.states=!n.states;break;case"Counties":n.counties=!n.counties;break;case"Congressional Districts":n.congressional=!n.congressional;break;case"Precincts":n.precincts=!n.precincts;break;case"National Parks":n.parks=!n.parks}r.setState({layers:n})},r.stopPropogation=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},r._renderCheckboxes=function(){return a.a.createElement("div",null,a.a.createElement(P.a,{border:"secondary",style:{width:"10rem",backgroundColor:"rgba(255,255,255,0.9)"},onMouseOver:function(e){return r.stopPropogation(e)}},a.a.createElement(P.a.Header,null,"Layers"),a.a.createElement(P.a.Body,null,a.a.createElement(y.a,null,["States","Congressional Districts","Counties","Precincts","National Parks"].map((function(e){return a.a.createElement("div",{key:"checkbox-".concat(e)},a.a.createElement(y.a.Check,{label:e,type:"checkbox",defaultChecked:"Congressional Districts"!=e&&"National Parks"!=e,onClick:function(t){return r.toggleLayer(e,t)}}))})))),a.a.createElement(P.a.Footer,{style:{lineHeight:"1.0"}},a.a.createElement("small",{className:"text-muted"},"Note: some layers will only show at certain zoom levels"))))},r.state={stateData:null,countyData:null,countyDataOutline:null,congressionalDistrictData:null,precinctData:null,viewport:{width:"100%",height:window.innerHeight,latitude:37.0902,longitude:-105.7129,zoom:3.3},popupInfo:null,selectedFeature:null,selectedPrecinctGroup:[],selectedMode:C.EditorModes.READ_ONLY,hoveredFeature:null,shouldShowPins:!1,features:{},selectedFeatureIndex:null,userMode:"View",layers:{states:!0,counties:!0,congressional:!1,precincts:!0,parks:!1},precinct_selection_to_edit:!1,precinct_selected_for_edit:null},r._editorRef=null,r.showErrorPins=r.showErrorPins.bind(Object(v.a)(r)),r.appData=new I,r.mapRef=a.a.createRef(),r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"getMap",value:function(){return this.mapRef.current.getMap()}},{key:"onStateSelected",value:function(e){var t=this;console.log(e.properties);var r=e.properties.id;this.appData.fetchCongressionalDistrictByState(r).then((function(e){t.setState({congressionalDistrictData:e})})),this.appData.fetchCountiesByState(r).then((function(e){t.setState({countyData:e})})),this.setState({selectedFeature:e})}},{key:"onCountySelected",value:function(e){var t=this,r=e.properties.id;this.appData.fetchShapeOfPrecinctsByCounty(r).then((function(e){console.log(e),t.setState({precinctData:e})})),this.setState({selectedFeature:e})}},{key:"onPrecinctHover",value:function(e,t){var r=t.srcEvent.shiftKey,n=this.state.selectedFeature;r&&"Precinct"===n.type?e.multiSelecting=!0:e.multiSelecting=!1}},{key:"onPrecinctSelected",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.precinct_selection_to_edit,a=e.properties.id;n?(this.setState({precinct_selected_for_edit:e.id}),this.addPrecinctToGroup(e),console.log("selectMultiple cus editmode")):this.appData.fetchPrecinctInfo(a).then((function(t){var r=e,n=[];for(var a in t.neighborsId)n.push(t.neighborsId[a].toString().trim());var i={demographicData:t.demographicData,fullName:t.fullName,id:t.id,isGhost:t.isGhost,parentId:t.parentDistrictId,precinctError:t.precinctErrors,votingData:t.votingData};void 0===r.properties.neighborsId&&(i.neighborsId=n);var o=Object.assign(r.properties,i);return r.properties=o,r})).then((function(e){var n=r.state.precinct_selected_for_edit;r.setState({precinct_selected_for_edit:null});var a=r.state.selectedFeature;if(n){var i=!1;for(var o in a.properties.neighborsId)a.properties.neighborsId[o].toString().trim()===n.toString().trim()&&(i=!0);i||a.properties.neighborsId&&a.properties.neighborsId.push(n.toString().trim())}var c=r.state.selectedFeature;console.log("prev",c),console.log("prevDyn",a),console.log("updated",e),t?(r.addPrecinctToGroup(e),console.log(r.state.selectedPrecinctGroup)):(console.log("jjj"),r.removeSelectedHighlight(c),r.removeHighlightPrecinctNeighbors(a),r.clearPrecinctGroup(),r.addSelectedHighlight(e),r.highlightPrecinctNeighbors(e),r.setState({selectedFeature:e}))}))}},{key:"addPrecinctToGroup",value:function(e){var t=this.state.selectedPrecinctGroup;if(0===t.length){var r=this.state.selectedFeature;t.push(r),t.push(e)}else{if(1!==t.length)return void S.b.warn("Can only add 2 precincts to a group",{position:S.b.POSITION.BOTTOM_CENTER});t.push(e)}console.log(t),this.addSelectedHighlight(e),this.setState({selectedPrecinctGroup:t})}},{key:"clearPrecinctGroup",value:function(){for(var e=this.state.selectedPrecinctGroup;0!=e.length;)this.removeSelectedHighlight(e.pop());this.setState({selectedPrecinctGroup:e})}},{key:"_zoomToFeature",value:function(e){var t=e.features[0];if(t)if("stateFill"!==t.layer.id&&"countyFill"!==t.layer.id);else{var r=O()(t),n=Object(u.a)(r,4),a=n[0],i=n[1],o=n[2],c=n[3],s=new E.WebMercatorViewport(this.state.viewport).fitBounds([[a,i],[o,c]],{padding:40}),l=s.longitude,p=s.latitude,h=s.zoom;this.setState({viewport:Object(d.a)({},this.state.viewport,{longitude:l,latitude:p,zoom:h,transitionInterpolator:new E.LinearInterpolator({around:[e.offsetCenter.x,e.offsetCenter.y]}),transitionDuration:1e3})})}}},{key:"addHoveredHighlight",value:function(e){var t=this.mapRef.current.getMap();e&&e.id&&e.source&&t.setFeatureState({source:e.source,id:e.id},{hover:!0})}},{key:"addSelectedHighlight",value:function(e){var t=this.mapRef.current.getMap();e&&e.id&&e.source&&t.setFeatureState({source:e.source,id:e.id},{selected:!0})}},{key:"removeSelectedHighlight",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.mapRef.current.getMap(),t&&t.id&&t.source&&r.setFeatureState({source:t.source,id:t.id},{selected:!1});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"highlightPrecinctNeighbors",value:function(e){console.log(e);var t=this.mapRef.current.getMap(),r=e.properties.neighborsId||!1,n=e.source;if(r&&n)for(var a in console.log("hihglighNeiggh",r),r){var i=r[a].toString().trim();console.log(i,a),t.setFeatureState({source:n,id:i},{neighbor:!0})}}},{key:"removeHighlightPrecinctNeighbors",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r,n,a,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),r=this.mapRef.current.getMap(),n=t.properties.neighborsId||!1,a=t.source,console.log("removeNeighbors",n),n&&a)for(i in n)o=n[i].toString().trim(),r.setFeatureState({source:a,id:o},{neighbor:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_renderTooltip",value:function(){var e=this.state,t=e.hoveredFeature,r=e.x,n=e.y,i=e.selectedFeature;if(t){if(t.isState){var o=t;return t&&a.a.createElement("div",{className:"state-tooltip",style:{left:r,top:n}},a.a.createElement("h5",null,o.properties.name))}if(t.isCounty){var c=t;return c&&a.a.createElement("div",{className:"state-tooltip",style:{left:r,top:n}},a.a.createElement("h5",null,c.properties.name))}if(t.isCongressional){var s=t;return s&&a.a.createElement("div",{className:"state-tooltip",style:{left:r,top:n}},a.a.createElement("h5",null,s.properties.name),a.a.createElement("div",null),a.a.createElement("div",{style:{fontStyle:"italic"}},"click to load precincts for county"))}if(t.isPrecinct){var l=t;return l&&a.a.createElement("div",{className:"state-tooltip",style:{left:r,top:n}},a.a.createElement("h6",null,"Precinct id: ",l.properties.id),l.id===i.id?a.a.createElement("div",{style:{fontStyle:"italic"}},"this precicnt is currently selected"):l.multiSelecting?a.a.createElement("div",{style:{fontStyle:"italic"}},"add this to group?"):"Precinct"===i.properties.type?a.a.createElement("div",{style:{fontStyle:"italic"}},"shift+click to add to selection"):void 0)}}}},{key:"stateSelect",value:function(e){var t=0,r=0;switch(e){case"New York":case"NY":t=43.2994,r=-76.2179;break;case"Wisconsin":case"WI":t=44.7844,r=-89.7879;break;case"Utah":case"UT":t=39.321,r=-112.0937}this.setState({viewport:Object(d.a)({},this.state.viewport,{latitude:t,longitude:r,zoom:6})})}},{key:"_renderErrorPopup",value:function(){var e=this,t=this.state.popupInfo;return t&&a.a.createElement(E.Popup,{tipSize:5,anchor:"top",longitude:t.longitude,latitude:t.latitude,closeOnClick:!1,onClose:function(){return e.setState({popupInfo:null})}},a.a.createElement(M,{info:t}))}},{key:"showErrorPins",value:function(){this.state.shouldShowPins?this.setState({shouldShowPins:!1}):this.setState({shouldShowPins:!0})}},{key:"getAllErrors",value:function(){var e=this;this.appData.fetchAllPrecinctError().then((function(t){console.log(t);var r={};for(var n in t){var a=t[n].precinctId;a&&(r[a]=t[n])}e.setState({allErrors:t})}))}},{key:"componentDidMount",value:function(){var e=this;this.appData.fetchAllStates().then((function(t){e.setState({stateData:t.featureCollection})})),this.getAllErrors()}},{key:"renderStateLayers",value:function(){var e=this.state,t=e.layers,r=e.stateData;return a.a.createElement(a.a.Fragment,null,t.states&&a.a.createElement(E.Source,{type:"geojson",data:r},a.a.createElement(E.Layer,Object.assign({},D,{maxzoom:5.5})),a.a.createElement(E.Layer,Object.assign({},T,{maxzoom:5.5}))))}},{key:"renderCongressionalLayers",value:function(){var e=this.state,t=e.layers,r=e.congressionalDistrictData;return a.a.createElement(a.a.Fragment,null,t.congressional&&a.a.createElement(E.Source,{type:"geojson",data:r},a.a.createElement(E.Layer,Object.assign({},F,{minzoom:5})),a.a.createElement(E.Layer,Object.assign({},x,{minzoom:5}))))}},{key:"renderCountyLayers",value:function(){var e=this.state,t=e.layers,r=e.countyData,n=e.selectedFeature;return a.a.createElement(a.a.Fragment,null,t.counties&&a.a.createElement(E.Source,{type:"geojson",data:r},a.a.createElement(E.Layer,Object.assign({},w,{minzoom:5.5})),a.a.createElement(E.Layer,Object.assign({},N,{minzoom:5.5,maxzoom:n&&"Precinct"===n.properties.type?7.5:9}))))}},{key:"renderPrecinctLayers",value:function(){var e=this.state,t=e.layers,r=e.precinctData;return a.a.createElement(a.a.Fragment,null,t.precincts&&a.a.createElement(E.Source,{type:"geojson",data:r},a.a.createElement(E.Layer,Object.assign({},R,{minzoom:7})),a.a.createElement(E.Layer,Object.assign({},j,{minzoom:7}))))}},{key:"precinctIsSelected",value:function(){var e=this.state.selectedFeature;return!(!e||!e.properties.type||"Precinct"!==e.properties.type)}},{key:"render",value:function(){var e=this,t=this.state,r=t.viewport,n=t.selectedMode,i=t.shouldShowPins;return a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"selectStateItem inlineDivs"},a.a.createElement(L,{select_state:function(t){return e.stateSelect.bind(e,t)}})),a.a.createElement("div",{className:"toggleModeItem inlineDivs"},a.a.createElement(me,{userModeSelect:function(t){return e.userModeSelect(t)},selectedFeature:this.state.selectedFeature})),this.precinctIsSelected()&&a.a.createElement("div",{className:"mergeBtn inlineDivs"},a.a.createElement(fe,{mergePrecincts:function(){return e.mergePrecincts()},enabled:this.state.selectedPrecinctGroup.length>=2})),a.a.createElement("div",null,a.a.createElement("div",{id:"leftCol"},a.a.createElement($,{selected:this.state.selectedFeature,showErrorPins:this.showErrorPins.bind(this),userMode:this.state.userMode,leftSideBarStatus:this.get_leftSideBar_status,precinctSelectedForEdit:this.state.precinct_selected_for_edit,appData:this.appData,allErrors:this.state.allErrors,errorListOnClick:this.errorListOnClick})),a.a.createElement(E.default,Object.assign({},r,{onViewportChange:function(t){return e.setState({viewport:t})},mapStyle:"mapbox://styles/shortland/ck7fn4gmu014c1ip60jlumnm2",mapboxApiAccessToken:ge,onHover:this._onHover,onClick:this._onClick,doubleClickZoom:!1,ref:this.mapRef}),a.a.createElement("div",{id:"map-checkboxes",style:{position:"absolute",textAlign:"left",fontSize:"10pt",top:"10%",right:"10px"}},this._renderCheckboxes()),a.a.createElement(C.Editor,{ref:function(t){return e._editorRef=t},clickRadius:12,onSelect:function(t){return e._onSelect(t)},onUpdate:function(t){return e._onUpdate(t)},mode:n}),a.a.createElement(_.a,{mapRef:this.mapRef,onResult:this.handleOnResult,onViewportChange:this.handleGeocoderViewportChange,mapboxApiAccessToken:ge,position:"top-right"}),a.a.createElement("div",{className:"FullScreenController MapControllers"},a.a.createElement(E.FullscreenControl,null)),a.a.createElement("div",{className:"NavigationController MapControllers"},a.a.createElement(E.NavigationControl,null)),a.a.createElement("div",{className:"ScaleController MapControllers"},a.a.createElement(E.ScaleControl,null)),this.renderStateLayers(),this.renderCountyLayers(),this.renderCongressionalLayers(),this.renderPrecinctLayers(),this._renderTooltip(),this._renderToolbar(),a.a.createElement(A,{data:ve,onClick:this._onClickError,shouldShowPins:i,appData:this.appData,mapRef:this.mapRef}),this._renderErrorPopup())),a.a.createElement(S.a,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(Ee,null),document.getElementById("map")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[190,1,2]]]);
//# sourceMappingURL=main.674de142.chunk.js.map