(this["webpackJsonp416-app"]=this["webpackJsonp416-app"]||[]).push([[0],{138:function(e,t){},183:function(e){e.exports=JSON.parse('[{"type":"self intersecting border","from":"preprocessing","latitude":40.6643,"longitude":-79.9385},{"type":"open borders","from":"preprocessing","latitude":43.633461,"longitude":-76.797859},{"type":"gaps precinct coverage","from":"preprocessing","latitude":40.6071584,"longitude":-74.0881154},{"type":"precinct multi polygon","from":"preprocessing","latitude":42.1936482,"longitude":-74.135364},{"type":"overlapping precincts","from":"preprocessing","latitude":33.5722,"longitude":-112.088}]')},197:function(e,t,n){e.exports=n(336)},202:function(e,t,n){},317:function(e,t,n){},318:function(e,t,n){},319:function(e,t,n){},320:function(e,t,n){},330:function(e,t,n){e.exports=n.p+"static/media/New_York_Congressional_Districts.92d17ef6.GeoJSON"},331:function(e,t){},336:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(37),l=n.n(o),i=(n(202),n(12)),c=n(91),s=n(4),u=n(3),d=n(8),m=n(5),p=n(6),h=n(9),f=n(23),E=n(73),v=n(352),g=n(351),b=(n(166),n(135)),y=n.n(b),O=n(50),_=n(349),k=n(170),C=n(49),S=n(14),w=n.n(S),j=n(19),D=function(){function e(){Object(s.a)(this,e),this.asyncFetch=function(){var e=Object(j.a)(w.a.mark((function e(t){var n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.allStates=null,this.baseUrl="http://67.80.171.107:1234/"}return Object(u.a)(e,[{key:"fetchAllStates",value:function(){var e=Object(j.a)(w.a.mark((function e(){var t,n,a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"allStates");case 2:if("ok"==(t=e.sent).status){e.next=6;break}return alert("server error: unable to get data"),e.abrupt("return");case 6:for(a in n={type:"FeatureCollection",features:[]},t.content)r={type:"Feature",properties:{name:t.content[a].name,id:t.content[a].id,congressional_districts:t.content[a].congressionalDistrictIds},geometry:t.content[a].geometry},n.features.push(r);return e.abrupt("return",{featureCollection:n});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCongressionalDistrictByState",value:function(){var e=Object(j.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"congressionalDistrictsForState?stateId=".concat(t));case 2:if("ok"==(n=e.sent).status){e.next=6;break}return alert("server error: unable to get data"),e.abrupt("return");case 6:return e.abrupt("return",n.content);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAllCongressionalDistricts",value:function(){var e=Object(j.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncFetch(this.baseUrl+"allCongressionalDistricts");case 2:if("ok"==(t=e.sent).status){e.next=6;break}return alert("server error: unable to get data"),e.abrupt("return");case 6:return e.abrupt("return",t.content);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPrecincts",value:function(){}}]),e}(),x=(n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(72)),M={id:"stateFill",type:"fill",paint:{"fill-color":"rgba(66, 135, 245, 0.3)"}},F={id:"stateFillHighlighted",type:"fill",source:"stateFill",paint:{"fill-color":"rgba(66, 135, 245, 0.5)"}},N={id:"precinctFill",type:"fill",paint:{"fill-color":"rgba(0, 0, 0, 0.0)"}},I={id:"precinctFillHighlighted",type:"fill",source:"precinctFill",paint:{"fill-color":"rgba(66, 135, 245, 0.5)"}},P={id:"precinctOutline",type:"line",paint:{"line-color":"rgba(66, 135, 245, 1.0)","line-width":1}},R={id:"congressionalFill",type:"fill",paint:{"fill-color":"rgba(0, 0, 0, 0.0)"}},T={id:"congressionalFillHighlighted",type:"fill",source:"congressionalFill",paint:{"fill-color":"rgba(66, 135, 245, 0.5)"}},L={id:"congressionalOutline",type:"line",paint:{"line-color":"rgba(14, 14, 14, 0.5)","line-width":2}},A=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.onClick,a=e.shouldShowPins;return console.log(a),a?(console.log("should show pins"),t.map((function(e,t){return r.a.createElement(f.Marker,{key:"marker-".concat(t),longitude:e.longitude,latitude:e.latitude},r.a.createElement("svg",{height:20,viewBox:"0 0 24 24",style:{cursor:"pointer",fill:"#d00",stroke:"none",transform:"translate(".concat(-10,"px,").concat(-20,"px)")},onClick:function(){return n(e)}},r.a.createElement("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"})))}))):r.a.createElement("span",null)}}]),t}(a.PureComponent),B=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.info;return r.a.createElement("div",null,r.a.createElement("h3",null,"Map Error"),r.a.createElement("br",null),r.a.createElement("p",{style:{textAlign:"left"}},"Type: ",e.type,r.a.createElement("br",null),"Source: ",e.from))}}]),t}(a.PureComponent),z=n(40),H=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(z.a,null,r.a.createElement(z.a.Toggle,{variant:"success",id:"dropdown-basic"},"Select State"),r.a.createElement(z.a.Menu,null,r.a.createElement(z.a.Item,{href:"#/NewYork",onClick:this.props.select_state("NY")},"New York"),r.a.createElement(z.a.Item,{href:"#/Utah",onClick:this.props.select_state("UT")},"Utah"),r.a.createElement(z.a.Item,{href:"#/Wisconsin",onClick:this.props.select_state("WI")},"Wisconsin")))}}]),t}(a.Component),V=n(83),G=n.n(V),Y=n(176),U=n(46),W=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={election:2016,electionResults:{Dem:60,Rep:40,Other:5}},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"changeElection",value:function(e){var t=100*Math.random(),n=100-(t=Math.round(t));this.setState({election:e,electionResults:{Dem:t,Rep:n}})}},{key:"render",value:function(){var e=this.state.electionResults,t=Object.keys(e);if(e)return r.a.createElement("div",null,r.a.createElement(Y.a,{size:"sm",className:"mt-3"},r.a.createElement(U.a,{variant:"outline-primary",id:"btn1",className:"button",onClick:this.changeElection.bind(this,2016)},"2016"),r.a.createElement(U.a,{variant:"outline-primary",id:"btn3",className:"button",onClick:this.changeElection.bind(this,2008)},"2018")),r.a.createElement("br",null),r.a.createElement("hr",null),"Presidential:",r.a.createElement("div",{className:"BarDisplay"},r.a.createElement("div",{className:"BlueBar",style:{width:e[t[0]]+"%"}},t[0]+" "+e[t[0]]+"%"),r.a.createElement("div",{className:"RedBar",style:{width:e[t[1]]+"%"}},t[1]+" "+e[t[1]]+"%")),r.a.createElement("br",null),r.a.createElement("hr",null),"Congressional:",r.a.createElement("div",{className:"BarDisplay"},r.a.createElement("div",{className:"BlueBar",style:{width:e[t[0]]+"%"}},t[0]+" "+e[t[0]]+"%"),r.a.createElement("div",{className:"RedBar",style:{width:e[t[1]]+"%"}},t[1]+" "+e[t[1]]+"%")),r.a.createElement("a",{className:"dataSource",href:"https://electionlab.mit.edu/data"},"source"))}}]),t}(a.Component),q=n(177),J=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Race"),r.a.createElement("th",null,"Num"),r.a.createElement("th",null,"Percent"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"White"),r.a.createElement("td",null,"112"),r.a.createElement("td",null,"44%")),r.a.createElement("tr",null,r.a.createElement("th",null,"Black"),r.a.createElement("td",null,"55"),r.a.createElement("td",null,"22%")),r.a.createElement("tr",null,r.a.createElement("th",null,"Hispanic"),r.a.createElement("td",null,"80"),r.a.createElement("td",null,"32%")),r.a.createElement("tr",null,r.a.createElement("th",null,"Asian"),r.a.createElement("td",null,"6"),r.a.createElement("td",null,"2%")),r.a.createElement("tr",null,r.a.createElement("th",null,"Other"),r.a.createElement("td",null,"0"),r.a.createElement("td",null,"0%"))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"Total Population"),r.a.createElement("td",null,"253")))),r.a.createElement("a",{className:"dataSource",href:"https://electionlab.mit.edu/data"},"source"))}}]),t}(a.PureComponent),Q=function(e){function t(e){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).call(this,e))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"save_changes",value:function(){this.dismiss()}},{key:"dismiss",value:function(){this.props.data_correction_page_status("done")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"data_correction_page"},r.a.createElement("h4",null,"Data Correction Form"),r.a.createElement(E.a,null,r.a.createElement(E.a.Group,{controlId:"data_correction.target_data"},r.a.createElement(E.a.Label,null,"Data for correction"),r.a.createElement(E.a.Control,{as:"select"},r.a.createElement("option",null,"Demographic"),r.a.createElement("option",null,"Election"))),r.a.createElement(E.a.Group,{controlId:"data_correction.value"},r.a.createElement(E.a.Label,null,"Changed Value"),r.a.createElement(E.a.Control,{type:"value",placeholder:"Please enter corrected data"}))),r.a.createElement("div",{className:"data_correction_Btns"},r.a.createElement(U.a,{variant:"outline-primary",id:"data_change",onClick:function(){e.save_changes()}},"Change"),r.a.createElement(U.a,{variant:"outline-primary",id:"data_change_cancel",onClick:function(){e.dismiss()}},"Cancel")),r.a.createElement("br",null))}}]),t}(a.Component),X=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={comments:[]},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.get_comments()}},{key:"componentDidUpdate",value:function(e){e.savedCommentData!==this.props.savedCommentData&&this.get_saved_comments()}},{key:"get_saved_comments",value:function(){var e=this;console.log("________________",this.props.savedCommentData),this.props.savedCommentData&&this.setState((function(t){var n=t.comments;return n.push(e.props.savedCommentData),{comments:n}}))}},{key:"get_comments",value:function(){for(var e=Math.ceil(3*Math.random()),t=["David","Ilan","Reed","Sam"],n=["Some comment about changing the election data b/c old source was invalid.","Some comment about undoing the yesterdays changes done to the boundaries of the Albany county of NY.","Some test comment.","Another test comment."],a=[],r=0;r<e;r++){var o={commenter:t[Math.round(3*Math.random())],content:n[Math.round(3*Math.random())]};a.push(o)}this.setState({comments:a})}},{key:"render",value:function(){var e=this.state.comments,t=[];for(var n in e)t.push(r.a.createElement(x.a,null,r.a.createElement(x.a.Body,null,e[n].commenter,": ",e[n].content)));return r.a.createElement("div",null,t)}}]),t}(a.Component),Z=n(94),$=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={show:!1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handle_modal_display",value:function(e){this.setState({show:e})}},{key:"saveCommentData",value:function(e,t){var n={commenter:e,content:t};this.props.savedCommentData(n)}},{key:"render",value:function(){var e=this,t=this.state.show;return r.a.createElement("div",null,r.a.createElement(U.a,{variant:"primary",onClick:function(){e.handle_modal_display(!0)}},"Create Comment"),r.a.createElement(Z.a,{show:t,onHide:function(){e.handle_modal_display(!1)}},r.a.createElement(Z.a.Header,{closeButton:!0},r.a.createElement(Z.a.Title,null,"Enter comment")),r.a.createElement(Z.a.Body,null,r.a.createElement("input",{id:"commentModalInput",placeholder:" Please enter your comments here"})),r.a.createElement(Z.a.Footer,null,r.a.createElement(U.a,{variant:"secondary",onClick:function(){e.handle_modal_display(!1)}},"Cancel"),r.a.createElement(U.a,{variant:"primary",onClick:function(){e.handle_modal_display(!1),e.saveCommentData("User",document.getElementById("commentModalInput").value)}},"Save Comment"))))}}]),t}(a.Component),K=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).createList=function(){var e=[],t=n.props.selected;if(t&&t.properties){var a=t.properties;for(var o in a)e.push(r.a.createElement("div",null,"".concat(o,": ").concat(a[o])))}return e},n.get_data_correction_page_status=function(e){"done"===e&&n.setState({mode:"data_display"})},n.get_comments_modal_data=function(e){e&&n.setState({comment_data:e})},n._handleClick=function(e){n.props.showErrorPins()},n.state={mode:"data_display",comment_data:void 0},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"makeHeader",value:function(){var e=this.props.selected;if(e&&e.properties&&e.properties.type)e.properties.type}},{key:"render",value:function(){var e=this.state.mode,t=this.state.comment_data,n=this.createList();return n.length>0&&"data_display"===e?r.a.createElement("div",null,r.a.createElement("h5",null),r.a.createElement(G.a,{trigger:"View General Info",open:!0},n),r.a.createElement(G.a,{trigger:"View Elections"},r.a.createElement(W,null)),r.a.createElement(G.a,{trigger:"View Demographics"},r.a.createElement(J,null)),r.a.createElement(G.a,{trigger:"Modify Data"},r.a.createElement(Q,{data_correction_page_status:this.get_data_correction_page_status})),r.a.createElement(G.a,{trigger:"View Comments"},r.a.createElement(X,{savedCommentData:t}),r.a.createElement("br",null),r.a.createElement($,{savedCommentData:this.get_comments_modal_data}),r.a.createElement("br",null)),r.a.createElement(G.a,{trigger:"View Map Errors"},r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View All"),r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View Self Intersecting Boundaries"),r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View Open Borders"),r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View Gaps in Precinct Coverage"),r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View Precinct Multipolygon"),r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View Overlapping Precincts"))):r.a.createElement("div",null,"Click on a highlighted state to view details")}}]),t}(a.Component),ee=n(92),te=n(93);function ne(){var e=Object(ee.a)(["\n  &:hover {\n    background: ",";\n  }\n  &:active: {\n    background: ",";\n  }\n"]);return ne=function(){return e},e}function ae(){var e=Object(ee.a)(["\n  position: absolute;\n  left: 52px;\n  padding: 4px;\n  background: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  min-width: 100px;\n  max-width: 300px;\n  height: 24px;\n  font-size: 12px;\n  z-index: 9;\n  pointer-events: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return ae=function(){return e},e}function re(){var e=Object(ee.a)(["\n  max-width: 20px !important;\n"]);return re=function(){return e},e}function oe(){var e=Object(ee.a)(["\n  height: 34px;\n  width: 34px;\n  padding: 7px;\n  display: flex;\n  justify-content: left;\n  color: ",";\n  background: ",";\n"]);return oe=function(){return e},e}function le(){var e=Object(ee.a)(["\n  position: absolute;\n//   width: 48px;\n  left: 260px;\n  top: 240px;\n  background: #fff;\n  box-shadow: 0 0 4px rgba(0, 0, 0, 0.15);\n  outline: none;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  padding: 0px;\n  margin: 0px;\n"]);return le=function(){return e},e}var ie=[{id:C.EditorModes.SELECT,text:"Edit Feature",icon:"icon-select.svg"},{id:C.EditorModes.DRAW_POINT,text:"Draw Point",icon:"icon-point.svg"},{id:C.EditorModes.DRAW_PATH,text:"Draw Polyline",icon:"icon-path.svg"},{id:C.EditorModes.DRAW_POLYGON,text:"Draw Polygon",icon:"icon-polygon.svg"},{id:C.EditorModes.DRAW_RECTANGLE,text:"Draw Rectangle",icon:"icon-rectangle.svg"}],ce=te.a.div(le()),se=te.a.div(oe(),(function(e){return e.selected?"#ffffff":"inherit"}),(function(e){return e.selected?"#0071bc":e.hovered?"#e6e6e6":"inherit"})),ue=te.a.img(re()),de=te.a.div(ae()),me=Object(te.a)(se)(ne(),(function(e){return e.selected?"#0071bc":"#e6e6e6"}),(function(e){return e.selected?"#0071bc":"inherit"})),pe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e)))._onHover=function(e){n.setState({hoveredId:e&&e.target.id})},n._onDelete=function(){n.props.onDelete(),n.setState({deleting:!0}),setTimeout((function(){return n.setState({deleting:!1})}),500)},n._onSaveChange=function(){console.log(n.props.features),n.props.toolBarRequest(n.props.features.data)},n.state={deleting:!1,hoveredId:null},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.selectedMode,n=this.state.hoveredId;return r.a.createElement(ce,null,ie.map((function(a){return r.a.createElement(se,{onClick:e.props.onSwitchMode,onMouseOver:e._onHover,onMouseOut:function(t){return e._onHover(null)},selected:a.id===t,hovered:a.id===n,key:a.id,id:a.id},r.a.createElement(ue,{id:a.id,onMouseOver:e._onHover,src:a.icon}),n===a.id&&r.a.createElement(de,null,a.text))})),r.a.createElement(me,{selected:this.state.deleting,onClick:this._onDelete,onMouseOver:this._onHover,onMouseOut:function(t){return e._onHover(null)}},r.a.createElement(ue,{id:"delete",onMouseOver:this._onHover,src:"icon-delete.svg"}),"delete"===n&&r.a.createElement(de,null,"Delete")),r.a.createElement(se,{onClick:function(){return e._onSaveChange()},onMouseOver:this._onHover,onMouseOut:function(t){return e._onHover(null)},id:"saveDrawBtn"},r.a.createElement("span",{style:{fontSize:"10px"}}," save")))}}]),t}(a.PureComponent),he=function(e){function t(e){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).call(this,e))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(z.a,null,r.a.createElement(z.a.Toggle,{variant:"success",id:"userModeSelect"},"Switch User Mode"),r.a.createElement(z.a.Menu,null,r.a.createElement(z.a.Item,{onClick:function(){return e.props.userModeSelect("View")}},"View"),r.a.createElement(z.a.Item,{onClick:function(){return e.props.userModeSelect("Edit")}},"Edit")))}}]),t}(a.Component),fe=n(183),Ee=(n(330),"pk.eyJ1Ijoic2hvcnRsYW5kIiwiYSI6ImNqeXVzOWhsbjBpYzczY29hNGZycTlqdXAifQ.B6l-uEqGG-Pw6-quz4eflQ"),ve=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).mapRef=r.a.createRef(),n.handleViewportChange=function(e){n.setState({viewport:Object(c.a)({},n.state.viewport,{},e)})},n.handleGeocoderViewportChange=function(e){return n.handleViewportChange(Object(c.a)({},e,{},{transitionDuration:1e3}))},n.handleOnResult=function(e){console.log(e.result),n.setState({searchResultLayer:new _.a({id:"search-result",data:e.result.geometry,getFillColor:[255,0,0,128],getRadius:1e3,pointRadiusMinPixels:10,pointRadiusMaxPixels:10})})},n._onDelete=function(){var e=n.state.selectedFeatureIndex;if(null!==e&&void 0!==e){O.b.info("Selected precinct is deleted",{position:O.b.POSITION.BOTTOM_RIGHT});var t=n.state.features;e>-1&&t.data.splice(e,1),n.setState({selectedFeatureIndex:null,selectedMode:C.EditorModes.READ_ONLY,features:t}),n._editorRef.deleteFeatures(e)}else O.b.info("Please select a new created precint before deleting action",{position:O.b.POSITION.BOTTOM_RIGHT})},n._switchMode=function(e){var t=e.target.id;t===n.state.selectedMode&&(t=null),n.setState({selectedMode:t})},n._onSelect=function(e){n.setState({selectedFeatureIndex:e&&e.selectedFeatureIndex})},n._onUpdate=function(e){n.setState({features:e,selectedMode:C.EditorModes.READ_ONLY,selectedFeatureIndex:null})},n._onSaveRequest=function(e){if(e){var t=n.state.features.data[n.state.selectedFeatureIndex];console.log(t),n.setState({selectedMode:C.EditorModes.READ_ONLY,selectedFeatureIndex:null}),t?O.b.info("New precinct is saved",{position:O.b.POSITION.BOTTOM_RIGHT}):O.b.info("Please select a new created precint to save",{position:O.b.POSITION.BOTTOM_RIGHT})}},n._renderToolbar=function(){return"Edit"===n.state.userMode?r.a.createElement(pe,{selectedMode:n.state.selectedMode,onSwitchMode:n._switchMode,onDelete:n._onDelete,onSelect:n._onSelect,features:n.state.features,selectedFeatureId:n.state.selectedFeatureId,toolBarRequest:n._onSaveRequest}):void 0},n._onClick=function(e){var t=e.features;if(t){var a=t.find((function(e){return"stateFill"===e.layer.id})),r=t.find((function(e){return"countyFill"===e.layer.id})),o=t.find((function(e){return"congressionalFill"===e.layer.id})),l=t.find((function(e){return"precinctFill"===e.layer.id}));if(a){if(a.properties.type="State",n.state.selectedFeature){if(a.properties.name===n.state.selectedFeature.properties.name)return void n._zoomToFeature(e)}else O.b.info("Click the same feature (state/county) again to zoom in.",{position:O.b.POSITION.BOTTOM_RIGHT});n.setState({selectedFeature:a})}else if(r){if(r.properties.type="County",n.state.selectedFeature&&r.properties.NAME===n.state.selectedFeature.properties.NAME)return void n._zoomToFeature(e);n.setState({selectedFeature:r})}else o?(o.properties.type="Congressional District",n.setState({selectedFeature:o})):l&&(l.properties.type="Precinct",n.setState({selectedFeature:l}))}},n.getFeatureFilter=function(e){return e?e.isState?["==","name",e.properties.name]:e.isCounty?["==","NAME",e.properties.NAME]:e.isCongressional?["==","NAMELSAD",e.properties.NAMELSAD]:e.isPrecinct?["==","GEOID10",e.properties.GEOID10]:null:null},n._onHover=function(e){var t=e.features,a=e.srcEvent,r=a.x,o=a.y;if(e.type&&e.features&&0!==e.features.length&&"composite"!==e.features[0].source){if(0!==r&&0!==o&&n.setState({x:r,y:o}),t){var l=t.find((function(e){return"stateFill"===e.layer.id})),i=t.find((function(e){return"countyFill"===e.layer.id})),c=t.find((function(e){return"congressionalFill"===e.layer.id})),s=t.find((function(e){return"precinctFill"===e.layer.id})),u=l||i||c||s;l?u.isState=!0:i?u.isCounty=!0:c?u.isCongressional=!0:s&&(u.isPrecinct=!0);var d=n.getFeatureFilter(u);n.setState({hoveredFeature:u,filter:d})}}else n.setState({hoveredFeature:null,filter:null})},n.userModeSelect=function(e){e&&n.setState({userMode:e})},n._onClickError=function(e){n.setState({popupInfo:e}),console.log(e),n.setState({viewport:Object(c.a)({},n.state.viewport,{longitude:e.longitude,latitude:e.latitude,transitionDuration:1e3,zoom:11})})},n.toggleLayer=function(e){var t=n.state.layers;switch(e){case"States":t.states=!t.states;break;case"Counties":t.counties=!t.counties;break;case"Congressional Districts":t.congressional=!t.congressional;break;case"Precincts":t.precincts=!t.precincts;break;case"National Parks":t.parks=!t.parks}n.setState({layers:t})},n._renderCheckboxes=function(){return r.a.createElement("div",null,r.a.createElement(x.a,{border:"secondary",style:{width:"10rem",backgroundColor:"rgba(255,255,255,0.9)"}},r.a.createElement(x.a.Header,null,"Layers"),r.a.createElement(x.a.Body,null,r.a.createElement(E.a,null,["States","Counties","Congressional Districts","Precincts","National Parks"].map((function(e){return r.a.createElement("div",{key:"checkbox-".concat(e)},r.a.createElement(E.a.Check,{label:e,type:"checkbox",defaultChecked:!0,onChange:n.toggleLayer.bind(Object(p.a)(n),e)}))})))),r.a.createElement(x.a.Footer,{style:{lineHeight:"1.0"}},r.a.createElement("small",{className:"text-muted"},"Note: some layers will only show at certain zoom levels"))))},n.state={stateData:null,countyData:null,countyDataOutline:null,congressionalDistrictData:null,precinctData:null,viewport:{width:"100%",height:window.innerHeight-56,latitude:37.0902,longitude:-105.7129,zoom:3.3},popupInfo:null,selectedFeature:null,selectedMode:C.EditorModes.READ_ONLY,selectedFeatureId:null,hoveredFeature:null,filter:null,shouldShowPins:!1,features:{},selectedFeatureIndex:null,userMode:"View",layers:{states:!0,counties:!0,congressional:!0,precincts:!0,parks:!0}},n._editorRef=null,n.showErrorPins=n.showErrorPins.bind(Object(p.a)(n)),n.appData=new D,n.filters={countyFilter:["==","NAME",""],precinctFilter:["==","GEOID10",""],stateFilter:["==","name",""],congressionalFilter:["==","NAMELSAD",""]},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"_zoomToFeature",value:function(e){var t=e.features[0];if(t)if("stateFill"!==t.layer.id&&"countyFill"!==t.layer.id);else{var n=y()(t),a=Object(i.a)(n,4),r=a[0],o=a[1],l=a[2],s=a[3],u=new f.WebMercatorViewport(this.state.viewport).fitBounds([[r,o],[l,s]],{padding:40}),d=u.longitude,m=u.latitude,p=u.zoom;this.setState({viewport:Object(c.a)({},this.state.viewport,{longitude:d,latitude:m,zoom:p,transitionInterpolator:new f.LinearInterpolator({around:[e.offsetCenter.x,e.offsetCenter.y]}),transitionDuration:1e3})})}}},{key:"_renderTooltip",value:function(){var e=this.state,t=e.hoveredFeature,n=e.x,a=e.y;if(t){if(t.isState){var o=t;return t&&r.a.createElement("div",{className:"state-tooltip",style:{left:n,top:a}},r.a.createElement("h5",null,o.properties.name),r.a.createElement("div",null,"Congressional Districts: ",o.properties.congressional_districts.length))}if(t.isCounty){var l=t;return l&&r.a.createElement("div",{className:"state-tooltip",style:{left:n,top:a}},r.a.createElement("h5",null,l.properties.NAME," County"),r.a.createElement("div",null,"FIPS Code: ",l.properties.FIPS_CODE))}if(t.isCongressional){var i=t;return i&&r.a.createElement("div",{className:"state-tooltip",style:{left:n,top:a}},r.a.createElement("h5",null,i.properties.NAMELSAD),r.a.createElement("div",null))}if(t.isPrecinct){var c=t;return c&&r.a.createElement("div",{className:"state-tooltip",style:{left:n,top:a}},r.a.createElement("h5",null,"Precinct GEOID: ",c.properties.GEOID10))}}}},{key:"stateSelect",value:function(e){var t,n=0,a=0;switch(e){case"New York":case"NY":n=43.2994,a=-76.2179,t=6;break;case"Wisconsin":case"WI":n=44.7844,a=-89.7879,t=6;break;case"Utah":case"UT":n=39.321,a=-112.0937,t=6}this.setState({viewport:Object(c.a)({},this.state.viewport,{latitude:n,longitude:a,zoom:t})})}},{key:"_renderErrorPopup",value:function(){var e=this,t=this.state.popupInfo;return t&&r.a.createElement(f.Popup,{tipSize:5,anchor:"top",longitude:t.longitude,latitude:t.latitude,closeOnClick:!1,onClose:function(){return e.setState({popupInfo:null})}},r.a.createElement(B,{info:t}))}},{key:"showErrorPins",value:function(){this.state.shouldShowPins?this.setState({shouldShowPins:!1}):this.setState({shouldShowPins:!0})}},{key:"componentDidMount",value:function(){var e=this;this.appData.fetchAllStates().then((function(t){e.setState({stateData:t.featureCollection})})),this.appData.fetchAllCongressionalDistricts().then((function(t){e.setState({congressionalDistrictData:t})}))}},{key:"renderLayers",value:function(){var e=this.state;e.stateData,e.countyData,e.countyDataOutline,e.congressionalDistrictData,e.precinctData,e.stateFilter,e.countyFilter,e.precinctFilter,e.congressionalFilter,this.state.layers;return r.a.createElement(r.a.Fragment,null)}},{key:"renderStateLayers",value:function(){var e=this.state,t=e.layers,n=e.stateData,a=e.stateFilter;return r.a.createElement(r.a.Fragment,null,t.states&&r.a.createElement(f.Source,{type:"geojson",data:n},r.a.createElement(f.Layer,Object.assign({},F,{filter:a,maxzoom:5})),r.a.createElement(f.Layer,Object.assign({},M,{maxzoom:5}))))}},{key:"renderCongressionalLayers",value:function(){var e=this.state,t=e.layers,n=e.congressionalDistrictData;return r.a.createElement(r.a.Fragment,null,t.congressional&&r.a.createElement(f.Source,{type:"geojson",data:n},r.a.createElement(f.Layer,Object.assign({},T,{minzoom:5})),r.a.createElement(f.Layer,Object.assign({},L,{minzoom:5})),r.a.createElement(f.Layer,Object.assign({},R,{minzoom:5}))))}},{key:"renderPrecinctLayers",value:function(){var e=this.state,t=e.layers,n=e.precinctData;return r.a.createElement(r.a.Fragment,null,t.precinct&&r.a.createElement(f.Source,{type:"geojson",data:n},r.a.createElement(f.Layer,Object.assign({},I,{minzoom:8})),r.a.createElement(f.Layer,Object.assign({},P,{minzoom:8})),r.a.createElement(f.Layer,Object.assign({},N,{minzoom:8}))))}},{key:"render",value:function(){var e=this,t=this.state,n=t.viewport,a=t.selectedMode,o=t.shouldShowPins;return r.a.createElement("div",{className:"App"},r.a.createElement(v.a,{bg:"dark",expand:"lg",variant:"dark"},r.a.createElement(v.a.Brand,{href:"#home"},"Election Data Quality"),r.a.createElement(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(v.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(g.a,{className:"mr-auto"},r.a.createElement(H,{select_state:function(t){return e.stateSelect.bind(e,t)}}),r.a.createElement(he,{userModeSelect:function(t){return e.userModeSelect(t)}})))),r.a.createElement("div",null,r.a.createElement("div",{id:"leftCol"},r.a.createElement(K,{selected:this.state.selectedFeature,showErrorPins:this.showErrorPins.bind(this)})),r.a.createElement(f.default,Object.assign({},n,{onViewportChange:function(t){return e.setState({viewport:t})},mapStyle:"mapbox://styles/shortland/ck7fn4gmu014c1ip60jlumnm2",mapboxApiAccessToken:Ee,onHover:this._onHover,onClick:this._onClick,doubleClickZoom:!1,ref:this.mapRef}),r.a.createElement("div",{id:"map-checkboxes",style:{position:"absolute",textAlign:"left",fontSize:"10pt",top:"10%",right:"10px"}},this._renderCheckboxes()),r.a.createElement(C.Editor,{ref:function(t){return e._editorRef=t},clickRadius:12,onSelect:function(t){return e._onSelect(t)},onUpdate:function(t){return e._onUpdate(t)},mode:a}),r.a.createElement(k.a,{mapRef:this.mapRef,onResult:this.handleOnResult,onViewportChange:this.handleGeocoderViewportChange,mapboxApiAccessToken:Ee,position:"top-right"}),r.a.createElement("div",{className:"FullScreenController MapControllers"},r.a.createElement(f.FullscreenControl,null)),r.a.createElement("div",{className:"NavigationController MapControllers"},r.a.createElement(f.NavigationControl,null)),r.a.createElement("div",{className:"ScaleController MapControllers"},r.a.createElement(f.ScaleControl,null)),this.renderStateLayers(),this.renderCongressionalLayers(),this.renderPrecinctLayers(),this._renderTooltip(),this._renderToolbar(),r.a.createElement(A,{data:fe,onClick:this._onClickError,shouldShowPins:o}),this._renderErrorPopup())),r.a.createElement(O.a,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ve,null),document.getElementById("map")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[197,1,2]]]);
//# sourceMappingURL=main.55c86a4b.chunk.js.map