(this["webpackJsonp416-app"]=this["webpackJsonp416-app"]||[]).push([[0],{135:function(e,t,a){e.exports=a.p+"static/media/ny_county_shoreline.b5f895d3.geojson"},136:function(e,t){},181:function(e){e.exports=JSON.parse('[{"type":"self intersecting border","from":"preprocessing","latitude":40.6643,"longitude":-79.9385},{"type":"open borders","from":"preprocessing","latitude":43.633461,"longitude":-76.797859},{"type":"gaps precinct coverage","from":"preprocessing","latitude":40.6071584,"longitude":-74.0881154},{"type":"precinct multi polygon","from":"preprocessing","latitude":42.1936482,"longitude":-74.135364},{"type":"overlapping precincts","from":"preprocessing","latitude":33.5722,"longitude":-112.088}]')},182:function(e,t,a){e.exports=a.p+"static/media/states_tooltip_data.1c2d3362.geojson"},183:function(e,t,a){e.exports=a.p+"static/media/GeoJSON_example.06e7f91a.geojson"},198:function(e,t,a){e.exports=a(336)},203:function(e,t,a){},317:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){},331:function(e,t){},336:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(36),l=a.n(o),i=(a(203),a(12)),c=a(63),s=a(4),u=a(3),d=a(8),m=a(5),p=a(6),h=a(9),f=a(24),E=a(355),v=a(354),b=a(103),g=a(132),y=a.n(g),_=a(49),O=a(351),C=a(168),j=a(48),w=(a(317),a(318),a(319),a(320),a(321),a(322),a(323),a(324),{id:"countyData",type:"fill",paint:{"fill-color":"rgba(20, 100, 50, 0.0)"}}),S={id:"countyData-highlighted",type:"fill",source:"countyData",paint:{"fill-color":"#6e599f","fill-opacity":.75}},k={id:"countyDataOutline",type:"line",paint:{"line-color":"#000000","line-width":2}},M=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.onClick,n=e.shouldShowPins;return console.log(n),n?(console.log("should show pins"),t.map((function(e,t){return r.a.createElement(f.Marker,{key:"marker-".concat(t),longitude:e.longitude,latitude:e.latitude},r.a.createElement("svg",{height:20,viewBox:"0 0 24 24",style:{cursor:"pointer",fill:"#d00",stroke:"none",transform:"translate(".concat(-10,"px,").concat(-20,"px)")},onClick:function(){return a(e)}},r.a.createElement("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"})))}))):r.a.createElement("span",null)}}]),t}(n.PureComponent),D=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.info;return r.a.createElement("div",null,r.a.createElement("h3",null,"Map Error"),r.a.createElement("br",null),r.a.createElement("p",{style:{textAlign:"left"}},"Type: ",e.type,r.a.createElement("br",null),"Source: ",e.from))}}]),t}(n.PureComponent),x=a(39),I=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(x.a,null,r.a.createElement(x.a.Toggle,{variant:"success",id:"dropdown-basic"},"Select State"),r.a.createElement(x.a.Menu,null,r.a.createElement(x.a.Item,{href:"#/NewYork",onClick:this.props.select_state("NY")},"New York"),r.a.createElement(x.a.Item,{href:"#/Utah",onClick:this.props.select_state("UT")},"Utah"),r.a.createElement(x.a.Item,{href:"#/Wisconsin",onClick:this.props.select_state("WI")},"Wisconsin")))}}]),t}(n.Component),N=a(82),P=a.n(N),R=a(174),T=a(45),F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={election:2016,electionResults:{Dem:60,Rep:40,Other:5}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"changeElection",value:function(e){var t=100*Math.random(),a=100-(t=Math.round(t));this.setState({election:e,electionResults:{Dem:t,Rep:a}})}},{key:"render",value:function(){var e=this.state.electionResults,t=Object.keys(e);if(e)return r.a.createElement("div",null,r.a.createElement(R.a,{size:"sm",className:"mt-3"},r.a.createElement(T.a,{variant:"outline-primary",id:"btn1",className:"button",onClick:this.changeElection.bind(this,2016)},"2016"),r.a.createElement(T.a,{variant:"outline-primary",id:"btn3",className:"button",onClick:this.changeElection.bind(this,2008)},"2018")),r.a.createElement("br",null),r.a.createElement("hr",null),"Presidential:",r.a.createElement("div",{className:"BarDisplay"},r.a.createElement("div",{className:"BlueBar",style:{width:e[t[0]]+"%"}},t[0]+" "+e[t[0]]+"%"),r.a.createElement("div",{className:"RedBar",style:{width:e[t[1]]+"%"}},t[1]+" "+e[t[1]]+"%")),r.a.createElement("br",null),r.a.createElement("hr",null),"Congressional:",r.a.createElement("div",{className:"BarDisplay"},r.a.createElement("div",{className:"BlueBar",style:{width:e[t[0]]+"%"}},t[0]+" "+e[t[0]]+"%"),r.a.createElement("div",{className:"RedBar",style:{width:e[t[1]]+"%"}},t[1]+" "+e[t[1]]+"%")),r.a.createElement("a",{className:"dataSource",href:"https://electionlab.mit.edu/data"},"source"))}}]),t}(n.Component),B=a(175),z=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(B.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Race"),r.a.createElement("th",null,"Num"),r.a.createElement("th",null,"Percent"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"White"),r.a.createElement("td",null,"112"),r.a.createElement("td",null,"44%")),r.a.createElement("tr",null,r.a.createElement("th",null,"Black"),r.a.createElement("td",null,"55"),r.a.createElement("td",null,"22%")),r.a.createElement("tr",null,r.a.createElement("th",null,"Hispanic"),r.a.createElement("td",null,"80"),r.a.createElement("td",null,"32%")),r.a.createElement("tr",null,r.a.createElement("th",null,"Asian"),r.a.createElement("td",null,"6"),r.a.createElement("td",null,"2%")),r.a.createElement("tr",null,r.a.createElement("th",null,"Other"),r.a.createElement("td",null,"0"),r.a.createElement("td",null,"0%"))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"Total Population"),r.a.createElement("td",null,"253")))),r.a.createElement("a",{className:"dataSource",href:"https://electionlab.mit.edu/data"},"source"))}}]),t}(n.PureComponent),A=a(72),L=function(e){function t(e){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).call(this,e))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"save_changes",value:function(){this.dismiss()}},{key:"dismiss",value:function(){this.props.data_correction_page_status("done")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"data_correction_page"},r.a.createElement("h4",null,"Data Correction Form"),r.a.createElement(A.a,null,r.a.createElement(A.a.Group,{controlId:"data_correction.target_data"},r.a.createElement(A.a.Label,null,"Data for correction"),r.a.createElement(A.a.Control,{as:"select"},r.a.createElement("option",null,"Demographic"),r.a.createElement("option",null,"Election"))),r.a.createElement(A.a.Group,{controlId:"data_correction.value"},r.a.createElement(A.a.Label,null,"Changed Value"),r.a.createElement(A.a.Control,{type:"value",placeholder:"Please enter corrected data"}))),r.a.createElement("div",{className:"data_correction_Btns"},r.a.createElement(T.a,{variant:"outline-primary",id:"data_change",onClick:function(){e.save_changes()}},"Change"),r.a.createElement(T.a,{variant:"outline-primary",id:"data_change_cancel",onClick:function(){e.dismiss()}},"Cancel")),r.a.createElement("br",null))}}]),t}(n.Component),H=a(137),V=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={comments:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.get_comments()}},{key:"componentDidUpdate",value:function(e){e.savedCommentData!==this.props.savedCommentData&&this.get_saved_comments()}},{key:"get_saved_comments",value:function(){var e=this;console.log("________________",this.props.savedCommentData),this.props.savedCommentData&&this.setState((function(t){var a=t.comments;return a.push(e.props.savedCommentData),{comments:a}}))}},{key:"get_comments",value:function(){for(var e=Math.ceil(3*Math.random()),t=["David","Ilan","Reed","Sam"],a=["Some comment about changing the election data b/c old source was invalid.","Some comment about undoing the yesterdays changes done to the boundaries of the Albany county of NY.","Some test comment.","Another test comment."],n=[],r=0;r<e;r++){var o={commenter:t[Math.round(3*Math.random())],content:a[Math.round(3*Math.random())]};n.push(o)}this.setState({comments:n})}},{key:"render",value:function(){var e=this.state.comments,t=[];for(var a in e)t.push(r.a.createElement(H.a,null,r.a.createElement(H.a.Body,null,e[a].commenter,": ",e[a].content)));return r.a.createElement("div",null,t)}}]),t}(n.Component),G=a(92),Y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={show:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handle_modal_display",value:function(e){this.setState({show:e})}},{key:"saveCommentData",value:function(e,t){var a={commenter:e,content:t};this.props.savedCommentData(a)}},{key:"render",value:function(){var e=this,t=this.state.show;return r.a.createElement("div",null,r.a.createElement(T.a,{variant:"primary",onClick:function(){e.handle_modal_display(!0)}},"Create Comment"),r.a.createElement(G.a,{show:t,onHide:function(){e.handle_modal_display(!1)}},r.a.createElement(G.a.Header,{closeButton:!0},r.a.createElement(G.a.Title,null,"Enter comment")),r.a.createElement(G.a.Body,null,r.a.createElement("input",{id:"commentModalInput",placeholder:" Please enter your comments here"})),r.a.createElement(G.a.Footer,null,r.a.createElement(T.a,{variant:"secondary",onClick:function(){e.handle_modal_display(!1)}},"Cancel"),r.a.createElement(T.a,{variant:"primary",onClick:function(){e.handle_modal_display(!1),e.saveCommentData("User",document.getElementById("commentModalInput").value)}},"Save Comment"))))}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).createList=function(){var e=[],t=a.props.selected;if(t&&t.properties){var n=t.properties;for(var o in n)e.push(r.a.createElement("div",null,"".concat(o,": ").concat(n[o])))}return e},a.get_data_correction_page_status=function(e){"done"===e&&a.setState({mode:"data_display"})},a.get_comments_modal_data=function(e){e&&a.setState({comment_data:e})},a._handleClick=function(e){a.props.showErrorPins()},a.state={mode:"data_display",comment_data:void 0},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.mode,t=this.state.comment_data,a=this.createList();return a.length>0&&"data_display"===e?r.a.createElement("div",null,r.a.createElement(P.a,{trigger:"View General Info",open:!0},a),r.a.createElement(P.a,{trigger:"View Elections"},r.a.createElement(F,null)),r.a.createElement(P.a,{trigger:"View Demographics"},r.a.createElement(z,null)),r.a.createElement(P.a,{trigger:"Modify Data"},r.a.createElement(L,{data_correction_page_status:this.get_data_correction_page_status})),r.a.createElement(P.a,{trigger:"View Comments"},r.a.createElement(V,{savedCommentData:t}),r.a.createElement("br",null),r.a.createElement(Y,{savedCommentData:this.get_comments_modal_data}),r.a.createElement("br",null)),r.a.createElement(P.a,{trigger:"View Map Errors"},r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View All"),r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View Self Intersecting Boundaries"),r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View Open Borders"),r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View Gaps in Precinct Coverage"),r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View Precinct Multipolygon"),r.a.createElement("button",{className:"Extra-Large-Button",onClick:this._handleClick},"View Overlapping Precincts"))):r.a.createElement("div",null,"Click on a highlighted state to view details")}}]),t}(n.Component),U=a(349),q=a(352);function J(e,t){var a=e.features,n=Object(q.a)().domain(a.map(t)).range(Object(U.a)(9));return{type:"FeatureCollection",features:a.map((function(e){var a=t(e),r=Object(c.a)({},e.properties,{value:a,percentile:n(a)});return Object(c.a)({},e,{properties:r})}))}}var Q=a(90),X=a(91);function Z(){var e=Object(Q.a)(["\n  &:hover {\n    background: ",";\n  }\n  &:active: {\n    background: ",";\n  }\n"]);return Z=function(){return e},e}function $(){var e=Object(Q.a)(["\n  position: absolute;\n  left: 52px;\n  padding: 4px;\n  background: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  min-width: 100px;\n  max-width: 300px;\n  height: 24px;\n  font-size: 12px;\n  z-index: 9;\n  pointer-events: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return $=function(){return e},e}function K(){var e=Object(Q.a)(["\n  max-width: 20px !important;\n"]);return K=function(){return e},e}function ee(){var e=Object(Q.a)(["\n  height: 34px;\n  width: 34px;\n  padding: 7px;\n  display: flex;\n  justify-content: left;\n  color: ",";\n  background: ",";\n"]);return ee=function(){return e},e}function te(){var e=Object(Q.a)(["\n  position: absolute;\n//   width: 48px;\n  left: 260px;\n  top: 240px;\n  background: #fff;\n  box-shadow: 0 0 4px rgba(0, 0, 0, 0.15);\n  outline: none;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  padding: 0px;\n  margin: 0px;\n"]);return te=function(){return e},e}var ae=[{id:j.EditorModes.SELECT,text:"Edit Feature",icon:"icon-select.svg"},{id:j.EditorModes.DRAW_POINT,text:"Draw Point",icon:"icon-point.svg"},{id:j.EditorModes.DRAW_PATH,text:"Draw Polyline",icon:"icon-path.svg"},{id:j.EditorModes.DRAW_POLYGON,text:"Draw Polygon",icon:"icon-polygon.svg"},{id:j.EditorModes.DRAW_RECTANGLE,text:"Draw Rectangle",icon:"icon-rectangle.svg"}],ne=X.a.div(te()),re=X.a.div(ee(),(function(e){return e.selected?"#ffffff":"inherit"}),(function(e){return e.selected?"#0071bc":e.hovered?"#e6e6e6":"inherit"})),oe=X.a.img(K()),le=X.a.div($()),ie=Object(X.a)(re)(Z(),(function(e){return e.selected?"#0071bc":"#e6e6e6"}),(function(e){return e.selected?"#0071bc":"inherit"})),ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e)))._onHover=function(e){a.setState({hoveredId:e&&e.target.id})},a._onDelete=function(){a.props.onDelete(),a.setState({deleting:!0}),setTimeout((function(){return a.setState({deleting:!1})}),500)},a._onSaveChange=function(){console.log(a.props.features),a.props.toolBarRequest(a.props.features.data)},a.state={deleting:!1,hoveredId:null},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.selectedMode,a=this.state.hoveredId;return r.a.createElement(ne,null,ae.map((function(n){return r.a.createElement(re,{onClick:e.props.onSwitchMode,onMouseOver:e._onHover,onMouseOut:function(t){return e._onHover(null)},selected:n.id===t,hovered:n.id===a,key:n.id,id:n.id},r.a.createElement(oe,{id:n.id,onMouseOver:e._onHover,src:n.icon}),a===n.id&&r.a.createElement(le,null,n.text))})),r.a.createElement(ie,{selected:this.state.deleting,onClick:this._onDelete,onMouseOver:this._onHover,onMouseOut:function(t){return e._onHover(null)}},r.a.createElement(oe,{id:"delete",onMouseOver:this._onHover,src:"icon-delete.svg"}),"delete"===a&&r.a.createElement(le,null,"Delete")),r.a.createElement(re,{onClick:function(){return e._onSaveChange()},onMouseOver:this._onHover,onMouseOut:function(t){return e._onHover(null)},id:"saveDrawBtn"},r.a.createElement("span",{style:{fontSize:"10px"}}," save")))}}]),t}(n.PureComponent),se=function(e){function t(e){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).call(this,e))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(x.a,null,r.a.createElement(x.a.Toggle,{variant:"success",id:"userModeSelect"},"Switch User Mode"),r.a.createElement(x.a.Menu,null,r.a.createElement(x.a.Item,{onClick:function(){return e.props.userModeSelect("View")}},"View"),r.a.createElement(x.a.Item,{onClick:function(){return e.props.userModeSelect("Edit")}},"Edit")))}}]),t}(n.Component),ue=a(181),de=a(182),me=a.n(de),pe=a(135),he=a.n(pe),fe=a(183),Ee=a.n(fe),ve="pk.eyJ1Ijoic2hvcnRsYW5kIiwiYSI6ImNqeXVzOWhsbjBpYzczY29hNGZycTlqdXAifQ.B6l-uEqGG-Pw6-quz4eflQ",be=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).mapRef=r.a.createRef(),a.handleViewportChange=function(e){a.setState({viewport:Object(c.a)({},a.state.viewport,{},e)})},a.handleGeocoderViewportChange=function(e){return a.handleViewportChange(Object(c.a)({},e,{},{transitionDuration:1e3}))},a.handleOnResult=function(e){console.log(e.result),a.setState({searchResultLayer:new O.a({id:"search-result",data:e.result.geometry,getFillColor:[255,0,0,128],getRadius:1e3,pointRadiusMinPixels:10,pointRadiusMaxPixels:10})})},a._onDelete=function(){var e=a.state.selectedFeatureIndex;if(null!==e&&void 0!==e){_.b.info("Selected precinct is deleted",{position:_.b.POSITION.BOTTOM_RIGHT});var t=a.state.features;e>-1&&t.data.splice(e,1),a.setState({selectedFeatureIndex:null,selectedMode:j.EditorModes.READ_ONLY,features:t}),a._editorRef.deleteFeatures(e)}else _.b.info("Please select a new created precint before deleting action",{position:_.b.POSITION.BOTTOM_RIGHT})},a._switchMode=function(e){var t=e.target.id;t===a.state.selectedMode&&(t=null),a.setState({selectedMode:t})},a._onSelect=function(e){a.setState({selectedFeatureIndex:e&&e.selectedFeatureIndex})},a._onUpdate=function(e){a.setState({features:e,selectedMode:j.EditorModes.READ_ONLY,selectedFeatureIndex:null})},a._onSaveRequest=function(e){if(e){var t=a.state.features.data[a.state.selectedFeatureIndex];console.log(t),a.setState({selectedMode:j.EditorModes.READ_ONLY,selectedFeatureIndex:null}),t?_.b.info("New precinct is saved",{position:_.b.POSITION.BOTTOM_RIGHT}):_.b.info("Please select a new created precint to save",{position:_.b.POSITION.BOTTOM_RIGHT})}},a._renderToolbar=function(){return"Edit"===a.state.userMode?r.a.createElement(ce,{selectedMode:a.state.selectedMode,onSwitchMode:a._switchMode,onDelete:a._onDelete,onSelect:a._onSelect,features:a.state.features,selectedFeatureId:a.state.selectedFeatureId,toolBarRequest:a._onSaveRequest}):void 0},a._onClick=function(e){var t=e.features,n=t&&t.find((function(e){return"stateData"===e.layer.id}));if(n){if(a.state.selectedFeature){if(n.properties.name===a.state.selectedFeature.properties.name)return void a._zoomToFeature(e)}else _.b.info("Click the same feature (state/county) again to zoom in.",{position:_.b.POSITION.BOTTOM_RIGHT});a.setState({selectedFeature:n})}else{var r=t&&t.find((function(e){return"countyData"===e.layer.id}));if(r)return a.state.selectedFeature&&r.properties.NAME===a.state.selectedFeature.properties.NAME?void a._zoomToFeature(e):void a.setState({selectedFeature:r});var o=t&&t.find((function(e){return"precinctData"===e.layer.id}));o&&a.setState({selectedFeature:o})}},a._onHover=function(e){var t=e.features,n=e.srcEvent,r=n.offsetX,o=n.offsetY,l=t&&t.find((function(e){return"stateData"===e.layer.id}));if(a.setState({hoveredFeature:l,x:r,y:o}),!l){var i=t&&t.find((function(e){return"countyData"===e.layer.id}));a.setState({countyHoveredFeature:i,x:r,y:o}),i&&a.setState({filter:["in","NAME",i.properties.NAME]})}},a.userModeSelect=function(e){e&&a.setState({userMode:e})},a._onClickError=function(e){a.setState({popupInfo:e}),console.log(e),a.setState({viewport:Object(c.a)({},a.state.viewport,{longitude:e.longitude,latitude:e.latitude,transitionDuration:1e3,zoom:11})})},a.state={countyData:null,countyDataOutline:null,stateData:null,hoveredFeature:null,precinctData:null,viewport:{width:"100%",height:window.innerHeight-56,latitude:37.0902,longitude:-105.7129,zoom:3.3},popupInfo:null,selectedFeature:null,selectedMode:j.EditorModes.READ_ONLY,selectedFeatureId:null,shouldShowPins:!1,features:{},selectedFeatureIndex:null,userMode:"View",filter:["in","NAME",""]},a._editorRef=null,a.showErrorPins=a.showErrorPins.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(b.a)(me.a,(function(t,a){t||e.setState({stateData:J(a,(function(e){return e.properties.amount_counties}))})})),Object(b.a)(he.a,(function(t,a){t||e.setState({countyDataOutline:a})})),Object(b.a)(he.a,(function(t,a){t||e.setState({countyData:a})})),Object(b.a)(Ee.a,(function(t,a){t||e.setState({precinctData:a})}))}},{key:"_zoomToFeature",value:function(e){var t=e.features[0];if(t)if("stateData"!==t.layer.id&&"countyData"!==t.layer.id);else{var a=y()(t),n=Object(i.a)(a,4),r=n[0],o=n[1],l=n[2],s=n[3],u=new f.WebMercatorViewport(this.state.viewport).fitBounds([[r,o],[l,s]],{padding:40}),d=u.longitude,m=u.latitude,p=u.zoom;this.setState({viewport:Object(c.a)({},this.state.viewport,{longitude:d,latitude:m,zoom:p,transitionInterpolator:new f.LinearInterpolator({around:[e.offsetCenter.x,e.offsetCenter.y]}),transitionDuration:1e3})})}}},{key:"_renderTooltip",value:function(){var e=this.state,t=e.hoveredFeature,a=e.countyHoveredFeature,n=e.x,o=e.y;return t?t&&r.a.createElement("div",{className:"state-tooltip",style:{left:n,top:o}},r.a.createElement("h5",null,t.properties.name),r.a.createElement("div",null,"Counties: ",t.properties.amount_counties)):a?a&&r.a.createElement("div",{className:"state-tooltip",style:{left:n,top:o}},r.a.createElement("h5",null,a.properties.NAME," County"),r.a.createElement("div",null,"FIPS Code: ",a.properties.FIPS_CODE)):void 0}},{key:"stateSelect",value:function(e){var t,a=0,n=0;switch(e){case"New York":case"NY":a=43.2994,n=-76.2179,t=6;break;case"Wisconsin":case"WI":a=44.7844,n=-89.7879,t=6;break;case"Utah":case"UT":a=39.321,n=-112.0937,t=6}this.setState({viewport:Object(c.a)({},this.state.viewport,{latitude:a,longitude:n,zoom:t})})}},{key:"_renderErrorPopup",value:function(){var e=this,t=this.state.popupInfo;return t&&r.a.createElement(f.Popup,{tipSize:5,anchor:"top",longitude:t.longitude,latitude:t.latitude,closeOnClick:!1,onClose:function(){return e.setState({popupInfo:null})}},r.a.createElement(D,{info:t}))}},{key:"showErrorPins",value:function(){this.state.shouldShowPins?this.setState({shouldShowPins:!1}):this.setState({shouldShowPins:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.viewport,n=t.stateData,o=t.countyDataOutline,l=t.countyData,i=t.precinctData,c=t.selectedMode,s=t.shouldShowPins,u=t.filter;return r.a.createElement("div",{className:"App"},r.a.createElement(E.a,{bg:"dark",expand:"lg",variant:"dark"},r.a.createElement(E.a.Brand,{href:"#home"},"Election Data Quality"),r.a.createElement(E.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(E.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(v.a,{className:"mr-auto"},r.a.createElement(I,{select_state:function(t){return e.stateSelect.bind(e,t)}}),r.a.createElement(se,{userModeSelect:function(t){return e.userModeSelect(t)}})))),r.a.createElement("div",null,r.a.createElement("div",{id:"leftCol"},r.a.createElement(W,{selected:this.state.selectedFeature,showErrorPins:this.showErrorPins.bind(this)})),r.a.createElement(f.default,Object.assign({},a,{onViewportChange:function(t){return e.setState({viewport:t})},mapStyle:"mapbox://styles/shortland/ck6bf8xag0zv81io8o68otfdr",mapboxApiAccessToken:ve,onHover:this._onHover,onClick:this._onClick,doubleClickZoom:!1,ref:this.mapRef}),r.a.createElement(j.Editor,{ref:function(t){return e._editorRef=t},clickRadius:12,onSelect:function(t){return e._onSelect(t)},onUpdate:function(t){return e._onUpdate(t)},mode:c}),r.a.createElement(C.a,{mapRef:this.mapRef,onResult:this.handleOnResult,onViewportChange:this.handleGeocoderViewportChange,mapboxApiAccessToken:ve,position:"top-right"}),r.a.createElement("div",{className:"FullScreenController MapControllers"},r.a.createElement(f.FullscreenControl,null)),r.a.createElement("div",{className:"NavigationController MapControllers"},r.a.createElement(f.NavigationControl,null)),r.a.createElement("div",{className:"ScaleController MapControllers"},r.a.createElement(f.ScaleControl,null)),r.a.createElement(f.Source,{type:"geojson",data:l},r.a.createElement(f.Layer,Object.assign({},S,{filter:u,minzoom:5,maxzoom:8})),r.a.createElement(f.Layer,Object.assign({},w,{minzoom:5,maxzoom:8}))),r.a.createElement(f.Source,{type:"geojson",data:o},r.a.createElement(f.Layer,Object.assign({},k,{minzoom:5}))),r.a.createElement(f.Source,{type:"geojson",data:n},r.a.createElement(f.Layer,Object.assign({},ye,{maxzoom:5}))),r.a.createElement(f.Source,{type:"geojson",data:i},r.a.createElement(f.Layer,Object.assign({},ge,{minzoom:8}))),this._renderTooltip(),this._renderToolbar(),r.a.createElement(M,{data:ue,onClick:this._onClickError,shouldShowPins:s}),this._renderErrorPopup())),r.a.createElement(_.a,null))}}]),t}(n.Component),ge={id:"precinctData",type:"fill",paint:{"fill-color":{property:"percentile",stops:[[0,"#3288bd"],[1,"#66c2a5"],[2,"#abdda4"],[3,"#e6f598"],[4,"#ffffbf"],[5,"#fee08b"],[6,"#fdae61"],[7,"#f46d43"],[8,"#d53e4f"]]},"fill-opacity":.5}},ye={id:"stateData",type:"fill",paint:{"fill-color":{property:"percentile",stops:[[0,"#3288bd"],[1,"#66c2a5"],[2,"#abdda4"],[3,"#e6f598"],[4,"#ffffbf"],[5,"#fee08b"],[6,"#fdae61"],[7,"#f46d43"],[8,"#d53e4f"]]},"fill-opacity":.8}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(be,null),document.getElementById("map")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[198,1,2]]]);
//# sourceMappingURL=main.33c0ecca.chunk.js.map